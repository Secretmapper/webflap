{"version":3,"sources":["automata/Layout/index.js","automata/Editor/stylesheet.js","automata/helpers/index.ts","automata/Editor/index.js","automata/ZoomedModal/index.js","automata/Instructions/index.js","automata/Samples/Sample.tsx","automata/Samples/0n2.fixture.js","automata/Samples/w#w.fixture.js","automata/Samples/loop.fixture.js","automata/Samples/index.tsx","core/Heading/index.js","core/hooks/useHover/index.js","automata/Tape/index.tsx","automata/Configurations/index.js","automata/MultipleInput/Panel.tsx","automata/MultipleInput/index.tsx","automata/MultipleInputEditor/index.js","automata/StepByStepControls/index.js","automata/Controls/Links/index.js","automata/Controls/index.js","automata/ShareLink/index.tsx","automata/helpers/tm.ts","automata/hooks/creds.js","automata/hooks/useSavedAutomata.ts","automata/hooks/useSavedAutomataLocalStorage.ts","automata/tm.fixtures.js","automata/hooks/useSavedAutomataState.ts","automata/hooks/useMultipleInputAutomata.js","automata/index.js","automata/hooks/useSaveAsImage.js","automata/APILoadableAutomata/index.tsx","Resolver.js","core/AlertProvider/index.tsx","App.js","serviceWorker.js","index.js"],"names":["Layout","props","react_default","a","createElement","View","style","styles","container","side","main","StyleSheet","create","flex","flexDirection","flexShrink","width","zIndex","stylesheet","selector","background-color","background-image","border-color","border-width","color","content","height","text-valign","background-fit","transition-property","transition-duration","label","curve-style","target-arrow-shape","text-background-color","text-background-opacity","text-background-shape","border-style","line-color","line-style","target-arrow-color","edge-text-rotation","shape","overlay-opacity","border-opacity","source-arrow-color","opacity","BLANK_CODE","String","fromCharCode","isConfigAccepted","finalStates","config","unprocessed","length","has","state","data","id","makeTMTransitionLabel","transition","concat","left","right","UncontrolledCytoscape","react_cytoscape_default","this","React","Component","backgroundColor","labelInputContainer","position","transform","translateX","translateY","labelInputRow","labelInputAction","fontSize","paddingLeft","paddingRight","paddingTop","paddingBottom","labelInputPicker","outlineWidth","margin","labelInput","textAlign","labelInputText","AutomataEditor","cyRef","useRef","inputElLeft","inputElRight","inputEl","_useState","useState","undefined","_useState2","Object","slicedToArray","prevLayout","setPrevLayout","_useState3","stepping","_useState4","prevStepping","setPrevStepping","_useState5","configHovered","_useState6","prevConfigHovered","setPrevConfigHovered","_useState7","_useState8","editing","setEditing","_useDebouncedCallback","useDebouncedCallback","current","onNodesChange","nodes","jsons","saveNodes","setNodeAsStart","useCallback","e","undoRedo","stackSizeLimit","do","target","setNodeAsFinal","ur","useEffect","action","eles","cy","initialState","setInitialState","getElementById","removeClass","addClass","_ref","_ref2","setFinalStates","add","delete","raf","onNodeEdit","node","_node$renderedPositio","renderedPosition","x","y","value","valueLeft","valueRight","type","focus","cxtMenuOpts","menuRadius","commands","fillColor","contentStyle","select","ele","enabled","onNodeDelete","activeFillColor","activePadding","indicatorSize","separatorWidth","spotlightPadding","minSpotlightRadius","maxSpotlightRadius","openMenuEvents","itemColor","itemTextShadowColor","atMouse","onKeydown","ctrlKey","metaKey","nodeName","preventDefault","which","undo","redo","on","evt","cyTarget","nanoid","classes","cxtmenu","document","addEventListener","animOffset","animate","edges","line-dash-offset","requestAnimationFrame","cancelAnimationFrame","removeEventListener","updateSteppingClasses","updateConfigHoveredClasses","layout","name","run","onNodeLabelInputBlur","setTimeout","input","ReactDOM","findDOMNode","inputLeft","inputRight","activeElement","$","trans","transitions","get","setTransitions","onRemoveTransition","remove","Editor_UncontrolledCytoscape","internal","edgehandles","preview","loopAllowed","complete","sourceNode","targetNode","addedEles","set","source","onEdgeEdit","first","edge","_edge$renderedMidpoin","renderedMidpoint","elements","cyStylesheet","top","TextInput","selectTextOnFocus","ref","placeholder","onChange","objectSpread","onBlur","Picker","selectedValue","onValueChange","Item","Button","title","onPress","i","parent","edgesTo","overlay","modal","borderRadius","padding","maxWidth","maxHeight","overflow","ZoomedModal","web","from","scale","to","showModal","tStyles","Fragment","heading","text","marginBottom","textBottom","actions","Instructions","Text","onClose","sample","cursor","borderColor","borderWidth","borderLeftWidth","shadowOffset","shadowColor","shadowOpacity","shadowRadius","marginRight","sampleSelected","boxSizing","sampleImg","borderBottomWidth","webstyles","Sample","onSelectSample","TouchableOpacity","selected","react_mathjax2_lib_default","Context","script","options","asciimath2jax","useMathMLspacing","delimiters","_0n2_fixture","initial","final","states","multipleInput","w_w_fixture","loop_fixture","uri","process","zeroN2Fixture","sample2","wwFixture","sample3","loopFixture","samplesWindow","myFiles","justifyContent","alignItems","myFilesText","samples","marginTop","cancelBtn","Samples","setSelected","onLoadSample","onLoadFile","Samples_Sample","onCancel","disabled","Heading","accessibilityRole","children","fontFamily","fontWeight","useHover","callback","Platform","OS","cacheRef","isHovered","setIsHovered","getNode","_touchableNode","_node","findNode","resolve","handleMouseOver","handleMouseOut","TapeCell","forwardRef","cell","cellHighlighted","cellText","cellTextHighlighted","scrollToRef","containerRef","scrollTo","offsetLeft","border","borderStyle","boxShadow","display","borderRightWidth","minHeight","minWidth","Tape","tape","useMemo","split","isScrolled","setIsScrolled","cellRef","head","className","map","key","Configurations","rejected","Config","hash","onHover","onConfigHover","configurations","touchableRef","hovering","configRejected","configFinal","processed","getProcessedStr","automata_Tape","substr","Panel","paused","done","panel","webStyles","accent","textLink","onClick","onContinue","onSimulateStepByStep","defaultProps","marginLeft","MultipleInput","strings","string","Row","configIndex","configs","continueConfig","onInputPress","accepted","isExpanded","setIsExpanded","b","data-for","data-tip","row","rowAccepted","rowRejected","rowHoveredAccepted","rowHoveredRejected","RowStatusIcon","MultipleInput_Panel","borderTopColor","borderTopWidth","rowHovered","loadingContainer","bottom","MultipleInputEditor","currMultipleInput","join","multilineInput","setMultipleInput","column","headingSmall","editorText","multiline","placeholer","onSaveMultilineInput","columnEditor","es","accept","onDrop","files","rejectedFiles","alert","reader","FileReader","onload","result","readAsText","getRootProps","getInputProps","isDragActive","assign","upload","uploadDragActive","uploadLabel","or","orText","lineHeight","outlineStyle","Controls","textWithButtonContainer","inputString","onInputStringChange","autoFocus","control","onPlay","isStepByStepStarted","controls","controlGap","onNext","alignContent","Links","howToUseRef","howToUseHover","sourceCodeRef","sourceCodeHover","issueRef","issueHover","linkContainer","link","linkHover","onViewInstructions","href","linkBottom","authorLinkContainer","authorLink","borderBottomColor","navLink","tab","setTab","setShowModal","rejectedConfigs","setLayout","saveAsImage","multipleInputConfigs","setIsStepByStepStarted","subheading","dist_default","transparent","isVisible","onBackdropPress","NavButton","runMultipleInput","automata_MultipleInput","onShare","isSharing","onViewOtherFiles","Controls_Links","ShareLink","copy","url","lazyResolveConfig","initialConfig","arguments","automataInitialConfig","repeat","Math","max","step","configuration","forEach","toRead","toWrite","toMove","headSymbol","writeHead","direction","Error","moveHead","min","abs","push","configSteps","stepFn","isConfigAcceptedFn","lIsConfigAccepted","stepIterations","configCount","newConfigs","_i","_args","regenerator_default","wrap","_context","prev","next","abrupt","slice","stop","_marked","SECRET_KEY","COLLECTION_ID","serializeTransitionMap","JSON","stringify","Array","k","v","serializeFinalStates","useSavedAutomata","useStorage","defaults","statesDefault","transitionsDefault","finalStatesDefault","initialStateDefault","_useStorage","_useStorage2","statesString","setStatesString","_useStorage3","_useStorage4","transitionsString","setTransitionsString","_useStorage5","_useStorage6","finalStatesString","setFinalStatesString","parse","setStates","_useStorage7","_useStorage8","setInputString","_useStorage9","_useStorage10","multipleInputString","setMultipleInputString","_useMemo","statesMap","Map","o","transitionsArray","_ref3","_ref4","deserializeTransitionMap","Set","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","_ref7","_ref6","err","return","toConsumableArray","values","setIsSharing","fetch","method","mode","headers","Content-Type","secret-key","collection-id","private","body","then","res","json","useSavedAutomataLocalStorage","useLocalStorage","q0","q1","q2","q3","q4","defaultData","statesFixture","transitionsFixture","finalStatesFixture","useSavedAutomataState","initialData","useMultipleInputAutomata","setMultipleInputConfigs","onRunMultipleInput","resolver","_resolver$next","index","_resolver$next2","Automata","viewOtherFiles","setViewOtherFiles","shareAlert","useAlert","saveHook","initialStateData","_saveHook","initialElements","onShareRaw","show","automata_ShareLink","window","location","hostname","setConfigs","_useMultipleInputAuto","_useMultipleInputAuto2","setRejectedConfigs","_useState9","_useState10","configBeingHovered","setConfigBeingHovered","filter","image","jpeg","png","replace","open","automata_ZoomedModal","Editor","automata_Samples","automata_Instructions","Controls_Controls","newRejectedConfigs","stepConfigs","flatten","hoveringIn","Loading","loading","loadingText","react_spinners","size","sizeUnit","APILoadableAutomata","setLoading","setData","match","params","Resolver","setKey","_useLocalStorage","_useLocalStorage2","hasShownTutorial","setHasShownTutorial","setShowModalRaw","history","useReactRouter","localStorage","setItem","react_router","exact","path","render","automata_APILoadableAutomata","positions","BOTTOM_CENTER","timeout","offset","FADE","AlertTemplate","message","close","closeButton","fill","xmlns","viewBox","d","button","AlertProvider","react_alert","template","App","react_router_dom","core_AlertProvider","src_Resolver","Boolean","Cytoscape","use","AppRegistry","registerComponent","runApplication","initialProps","rootTag","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.29685482.chunk.js","sourcesContent":["import React from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nexport default function Layout(props) {\n  return (\n    <View style={styles.container}>\n      <View style={styles.side}>{props.side}</View>\n      <View style={styles.main}>{props.main}</View>\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    flexDirection: 'row'\n  },\n  main: {\n    flexDirection: 'column',\n    flex: 1\n  },\n  side: {\n    flexDirection: 'column',\n    flexShrink: 0,\n    width: 250,\n    zIndex: 2\n  }\n})\n","export default [\n  {\n    selector: 'node',\n    style: {\n      'background-color': 'white',\n      'background-image': 'url(assets/circle.svg)',\n      'border-color': 'black',\n      'border-width': 1,\n      color: 'black',\n      content: 'data(label)',\n      height: 50,\n      'text-valign': 'center',\n      width: 50\n    }\n  },\n  {\n    selector: 'node.dfa__state--final',\n    style: {\n      'background-fit': 'cover',\n      'background-image': 'url(assets/circle.svg)'\n    }\n  },\n  {\n    selector: 'node.dfa__state--initial',\n    style: {\n      'border-color': 'blue'\n    }\n  },\n  {\n    selector: 'node.dfa__state--stepping',\n    style: {\n      'background-color': '#61bffc',\n      'transition-property': 'background-color',\n      'transition-duration': '0.2s'\n    }\n  },\n  {\n    selector: 'edge',\n    style: {\n      label: 'data(label)',\n      'curve-style': 'bezier',\n      'target-arrow-shape': 'triangle',\n      width: '1',\n      'text-background-color': 'white',\n      'text-background-opacity': '1',\n      'text-background-shape': 'rectangle'\n    }\n  },\n  {\n    selector: 'node.dfa__state--config-hover',\n    style: {\n      'border-color': '#0d47a1',\n      'border-style': 'dashed',\n      'border-width': 2\n    }\n  },\n  {\n    selector: 'edge.dfa__state--config-hover',\n    style: {\n      'line-color': '#0d47a1',\n      'line-style': 'dashed',\n      'target-arrow-color': '#0d47a1',\n      width: 2\n    }\n  },\n  {\n    selector: 'edge.autorotate',\n    style: {\n      'edge-text-rotation': 'autorotate'\n    }\n  },\n  {\n    selector: '.eh-handle',\n    style: {\n      'background-color': 'red',\n      width: 12,\n      height: 12,\n      shape: 'ellipse',\n      'overlay-opacity': 0,\n      'border-width': 12, // makes the handle easier to hit\n      'border-opacity': 0\n    }\n  },\n  {\n    selector: '.eh-hover',\n    style: {\n      'background-color': 'red'\n    }\n  },\n  {\n    selector: '.eh-source',\n    style: {\n      'border-width': 2,\n      'border-color': 'red'\n    }\n  },\n  {\n    selector: '.eh-target',\n    style: {\n      'border-width': 2,\n      'border-color': 'red'\n    }\n  },\n  {\n    selector: '.eh-preview, .eh-ghost-edge',\n    style: {\n      'background-color': 'red',\n      'line-color': 'red',\n      'target-arrow-color': 'red',\n      'source-arrow-color': 'red'\n    }\n  },\n  {\n    selector: '.eh-ghost-edge.eh-preview-active',\n    style: {\n      opacity: 0\n    }\n  }\n]\n","import flatten from 'lodash.flatten'\nimport nanoid from 'nanoid'\n\nexport const LAMBDA_CODE = String.fromCharCode(0x03bb)\nexport const BLANK_CODE = String.fromCharCode(0x2423)\n\ntype AutomataState = {\n  data: {\n    id: string,\n    label: string\n  },\n  position: {\n    x: number,\n    y: number\n  }\n}\n\nexport type AutomataTransition = {\n  source: AutomataState,\n  target: AutomataState,\n  label: string,\n  left: string,\n  right: 'L' | 'R'\n}\n\nexport type AutomataStates = Map<string, AutomataState>\nexport type AutomataTransitions = Map<string, AutomataTransition>\n\n/**\n * Configuration of the current state step in an automaton\n **/\nexport type AutomataConfiguration = {\n  hash: string,\n  parent: AutomataConfiguration,\n  state: AutomataState,\n  input: string,\n  unprocessed: string\n}\n\nexport function initialConfig (initialState: number, input = 'bc') {\n  return {\n    hash: nanoid(),\n    // TODO: Type this\n    state: { data: { id: initialState } },\n    input,\n    unprocessed: input\n  }\n}\n\nexport function step (\n  transitions:AutomataTransitions,\n  configuration: AutomataConfiguration\n): Array<AutomataConfiguration> {\n  const configs: Array<AutomataConfiguration> = []\n  const unprocessedInput = configuration.unprocessed\n\n  // XXX: map && compact this?\n  transitions.forEach((transition) => {\n    if (configuration.state.data.id !== transition.source.data.id) {\n      return \n    }\n\n    const transLabel = transition.label\n\n    if (unprocessedInput.startsWith(transLabel)) {\n      configs.push({\n        // TODO: use a hash from the path?\n        hash: nanoid(),\n        parent: configuration,\n        state: transition.target,\n        input: configuration.input,\n        unprocessed: unprocessedInput.substr(transLabel.length)\n      })\n    }\n  })\n\n  return configs\n}\n\nexport function isConfigAccepted(finalStates: Set<string>, config: AutomataConfiguration) {\n  return (\n    config.unprocessed.length === 0\n    && finalStates.has(config.state.data.id)\n  )\n}\n\nexport function resolveConfig(\n  transitions:AutomataTransitions,\n  configuration: AutomataConfiguration,\n  finalStates: Set<string>,\n  // TODO: this should be a generic\n  stepFn: (transitions: AutomataTransitions, configuration: any) => Array<any> = step,\n  isConfigAcceptedFn: (finalStates: Set<string>, config: any) => boolean = isConfigAccepted\n) {\n  const lIsConfigAccepted = (config: AutomataConfiguration) => isConfigAcceptedFn(finalStates, config)\n  let configs = [configuration]\n\n  do {\n    for (let i = 0; i < configs.length; i++) {\n      if (lIsConfigAccepted(configs[i])) {\n        return configs[i]\n      }\n    }\n\n    configs = flatten(configs.map(c => stepFn(transitions, c)))\n  } while (configs.length !== 0)\n\n  return null\n}\n\nexport function makeTMTransitionLabel(\n  transition: AutomataTransition\n) {\n  return `${transition.left || BLANK_CODE} ; ${transition.label || BLANK_CODE} ; ${transition.right}`\n}\n","import React, { useCallback, useEffect, useRef, useState } from 'react'\nimport ReactDOM from 'react-dom'\nimport nanoid from 'nanoid'\nimport { StyleSheet, Button, TextInput, Picker, View } from 'react-native'\nimport { useDebouncedCallback } from 'use-debounce'\nimport Cytoscape from 'react-cytoscapejs'\nimport cyStylesheet from './stylesheet'\nimport { BLANK_CODE, makeTMTransitionLabel } from '../helpers'\n\nexport function AutomataEditor(props) {\n  const cyRef = useRef(null)\n  const inputElLeft = useRef(null)\n  const inputElRight = useRef(null)\n  const inputEl = useRef(null)\n  const [prevLayout, setPrevLayout] = useState(undefined)\n  const [prevStepping, setPrevStepping] = useState(props.stepping)\n  const [prevConfigHovered, setPrevConfigHovered] = useState(\n    props.configHovered\n  )\n  const [editing, setEditing] = useState(null)\n  const [saveNodes] = useDebouncedCallback(\n    () => {\n      if (cyRef.current) {\n        props.onNodesChange(cyRef.current.nodes().jsons())\n      }\n    },\n    1000,\n    [props.onNodesChange]\n  )\n\n  const setNodeAsStart = useCallback(\n    e => {\n      const cy = cyRef.current\n      const ur = cy.undoRedo({ stackSizeLimit: 15 })\n\n      ur.do('setAsInitial', e.target)\n    },\n    [cyRef]\n  )\n  const setNodeAsFinal = useCallback(\n    e => {\n      const cy = cyRef.current\n      const ur = cy.undoRedo({ stackSizeLimit: 15 })\n\n      if (props.finalStates.has(e.target.data().id)) {\n        ur.do('unsetAsFinal', e.target)\n      } else {\n        ur.do('setAsFinal', e.target)\n      }\n    },\n    [cyRef]\n  )\n\n  useEffect(\n    () => {\n      const ur = cyRef.current.undoRedo()\n\n      function setInitialAction(eles) {\n        const cy = cyRef.current\n        const initialState = props.initialState\n        props.setInitialState(eles.data().id)\n\n        cy.getElementById(initialState).removeClass('dfa__state--initial')\n\n        return [initialState, eles.addClass('dfa__state--initial')]\n      }\n      function setInitialActionUndo([initialState, eles]) {\n        const cy = cyRef.current\n        props.setInitialState(initialState)\n\n        cy.getElementById(initialState).addClass('dfa__state--initial')\n        return eles.removeClass('dfa__state--initial')\n      }\n\n      ur.action('setAsInitial', setInitialAction, setInitialActionUndo)\n    },\n    [props.initialState]\n  )\n  useEffect(\n    () => {\n      const cy = cyRef.current\n      const ur = cy.undoRedo({ stackSizeLimit: 15 })\n      ur.action(\n        'setAsFinal',\n        eles => {\n          props.setFinalStates(props.finalStates.add(eles.data().id))\n          return eles.addClass('dfa__state--final')\n        },\n        eles => {\n          props.setFinalStates(props.finalStates.delete(eles.data().id))\n          return eles.removeClass('dfa__state--final')\n        }\n      )\n      ur.action(\n        'unsetAsFinal',\n        eles => {\n          props.setFinalStates(props.finalStates.delete(eles.data().id))\n          return eles.removeClass('dfa__state--final')\n        },\n        eles => {\n          props.setFinalStates(props.finalStates.add(eles.data().id))\n          return eles.addClass('dfa__state--final')\n        }\n      )\n\n      const onNodeEdit = e => {\n        const node = e.target\n        const { x, y } = node.renderedPosition()\n\n        setEditing({\n          x,\n          y,\n          id: node.id(),\n          value: node.data('label'),\n          valueLeft: '',\n          valueRight: '',\n          type: 'node'\n        })\n        inputEl.current.focus()\n        node.data('label', '')\n      }\n\n      const onNodeDelete = e => {\n        const node = e.target\n        ur.do('remove', node)\n      }\n\n      const onSurfaceClick = evt => {\n        if (editing) {\n          return\n        }\n\n        const target = evt.target || evt.cyTarget\n        if (target === cy) {\n          const node = ur.do('add', {\n            data: {\n              id: nanoid(),\n              label: ''\n            },\n            position: {\n              x: evt.position.x,\n              y: evt.position.y\n            },\n            classes: ['dfa__state']\n          })\n          onNodeEdit({ target: node })\n        }\n      }\n\n      const cxtMenuOpts = {\n        menuRadius: 100,\n        selector: 'node',\n        commands: [\n          {\n            fillColor: 'rgba(200, 200, 200, 0.75)',\n            content: 'Set/Unset as Initial',\n            contentStyle: {},\n            select: function(ele) {\n              setNodeAsStart({ target: ele })\n            },\n            enabled: true\n          },\n          {\n            fillColor: 'rgba(200, 200, 200, 0.75)',\n            content: 'Set/Unset as Final',\n            contentStyle: {},\n            select: function(ele) {\n              setNodeAsFinal({ target: ele })\n            },\n            enabled: true\n          },\n          {\n            fillColor: 'rgba(200, 200, 200, 0.75)',\n            content: 'edit',\n            contentStyle: {},\n            select: function(ele) {\n              onNodeEdit({ target: ele })\n            },\n            enabled: true\n          },\n          {\n            fillColor: 'rgba(200, 200, 200, 0.75)',\n            content: 'delete',\n            contentStyle: {},\n            select: function(ele) {\n              onNodeDelete({ target: ele })\n            },\n            enabled: true\n          }\n        ],\n        fillColor: 'rgba(0, 0, 0, 0.75)',\n        activeFillColor: 'rgba(1, 105, 217, 0.75)',\n        activePadding: 10,\n        indicatorSize: 24,\n        separatorWidth: 3,\n        spotlightPadding: 4,\n        minSpotlightRadius: 24,\n        maxSpotlightRadius: 38,\n        openMenuEvents: 'cxttapstart taphold',\n        itemColor: 'white',\n        itemTextShadowColor: 'transparent',\n        zIndex: 9999,\n        atMouse: false\n      }\n\n      cy.on('tap', onSurfaceClick)\n      cy.on('data', saveNodes)\n      cy.on('add', saveNodes)\n      cy.on('remove', saveNodes)\n      cy.on('position', saveNodes)\n      cy.cxtmenu(cxtMenuOpts)\n\n      function onKeydown(e) {\n        if ((e.ctrlKey || e.metaKey) && e.target.nodeName === 'BODY') {\n          e.preventDefault()\n          if (e.which === 90) {\n            ur.undo()\n          } else if (e.which === 89) {\n            ur.redo()\n          }\n        }\n      }\n      document.addEventListener('keydown', onKeydown)\n\n      let raf\n      let animOffset = 0\n\n      function animate() {\n        animOffset++\n        cy.edges().animate({\n          style: { 'line-dash-offset': -animOffset }\n        })\n        raf = requestAnimationFrame(animate)\n      }\n\n      animate()\n\n      return () => {\n        if (raf) {\n          cancelAnimationFrame(raf)\n        }\n        document.removeEventListener('keydown', onKeydown)\n      }\n    },\n    ['once']\n  )\n\n  const setCy = internal => {\n    cyRef.current = internal\n    props.cy(internal)\n\n    const cy = cyRef.current\n    cy.edgehandles({\n      preview: false,\n      loopAllowed: function() {\n        return true\n      },\n      complete: onEdgeCreate\n    })\n\n    function onEdgeCreate(sourceNode, targetNode, addedEles) {\n      // TODO: Have all these data handled in one place\n      props.transitions.set(addedEles.id(), {\n        id: addedEles.id(),\n        label: addedEles.label || BLANK_CODE,\n        left: BLANK_CODE,\n        right: 'R',\n        source: { data: sourceNode.data() },\n        target: { data: targetNode.data() }\n      })\n      props.setTransitions()\n\n      onEdgeEdit({ target: addedEles.first() })\n    }\n    const onEdgeEdit = e => {\n      const edge = e.target\n      const { x, y } = edge.renderedMidpoint()\n      const transition = props.transitions.get(edge.id())\n      const label = transition.label\n      const valueLeft = transition.left\n      const valueRight = transition.right\n\n      setEditing({\n        x,\n        y,\n        id: edge.id(),\n        value: label,\n        valueLeft,\n        valueRight,\n        type: 'edge'\n      })\n      inputEl.current.focus()\n      edge.data('label', '')\n    }\n\n    // cy.on('taphold', 'node.dfa__state', onNodeEdit)\n    cy.on('taphold', 'edge', onEdgeEdit)\n    updateSteppingClasses()\n    updateConfigHoveredClasses()\n  }\n\n  updateSteppingClasses()\n  updateConfigHoveredClasses()\n\n  if (props.layout !== prevLayout) {\n    setPrevLayout(props.layout)\n    if (cyRef.current) {\n      cyRef.current.layout({ name: props.layout }).run()\n    }\n  }\n\n  const onEditingValueChange = e => {\n    setEditing({ ...editing, value: e.target.value })\n  }\n  const onEditingLeftValueChange = e => {\n    setEditing({ ...editing, valueLeft: e.target.value })\n  }\n  const onTMDirectionChange = valueRight => {\n    setEditing({ ...editing, valueRight })\n  }\n  const onNodeLabelInputBlur = e => {\n    // TODO: use onFocusOut (see: https://github.com/facebook/react/issues/6410)\n    const cy = cyRef.current\n    setTimeout(function() {\n      const input = ReactDOM.findDOMNode(inputEl.current)\n      const inputLeft = ReactDOM.findDOMNode(inputElLeft.current)\n      const inputRight = ReactDOM.findDOMNode(inputElRight.current)\n\n      const isFocusOut =\n        document.activeElement !== input &&\n        document.activeElement !== inputLeft &&\n        document.activeElement !== inputRight\n\n      if (isFocusOut) {\n        if (editing.type === 'node') {\n          cy.$(`#${editing.id}`).data('label', input.value)\n        } else {\n          // update root transitions object as well\n          // unfortunately we have to do this dirty\n          // hack since there are two sources of truth\n          const trans = props.transitions.get(editing.id)\n          trans.left = inputLeft.value || BLANK_CODE\n          trans.label = input.value || BLANK_CODE\n          trans.right = inputRight.value\n          props.setTransitions()\n\n          cy.$(`#${editing.id}`).data('label', makeTMTransitionLabel(trans))\n        }\n\n        setEditing(null)\n      }\n    }, 0)\n  }\n  const onRemoveTransition = useCallback(\n    e => {\n      cyRef.current.remove(`#${editing.id}`)\n      props.transitions.delete(editing.id)\n      props.setTransitions()\n      setEditing(null)\n    },\n    [cyRef.current, editing]\n  )\n\n  return (\n    <View style={styles.container}>\n      <UncontrolledCytoscape\n        cy={setCy}\n        layout={props.layout ? { name: props.layout } : null}\n        elements={props.elements}\n        stylesheet={cyStylesheet}\n        style={{ height: '100%', width: '100%' }}\n      />\n      {editing && (\n        <View\n          style={[\n            styles.labelInputContainer,\n            { left: editing.x, top: editing.y }\n          ]}\n        >\n          <View style={styles.labelInputRow}>\n            {editing.type !== 'node' && (\n              <TextInput\n                selectTextOnFocus\n                ref={inputElLeft}\n                style={[styles.labelInput, styles.labelInputText]}\n                value={editing.valueLeft || ''}\n                placeholder={BLANK_CODE}\n                onChange={onEditingLeftValueChange}\n                onBlur={onNodeLabelInputBlur}\n              />\n            )}\n            <TextInput\n              selectTextOnFocus\n              ref={inputEl}\n              style={[styles.labelInput, styles.labelInputText]}\n              value={editing.value || ''}\n              onChange={onEditingValueChange}\n              onBlur={onNodeLabelInputBlur}\n            />\n            {editing.type !== 'node' && (\n              <Picker\n                ref={inputElRight}\n                selectedValue={editing.valueRight || 'R'}\n                onValueChange={onTMDirectionChange}\n                style={styles.labelInputPicker}\n              >\n                <Picker.Item label=\"L\" value=\"L\" />\n                <Picker.Item label=\"R\" value=\"R\" />\n              </Picker>\n            )}\n            {editing.type !== 'node' && (\n              <Button\n                style={styles.labelInputAction}\n                title=\"Remove\"\n                onPress={onRemoveTransition}\n              />\n            )}\n          </View>\n        </View>\n      )}\n    </View>\n  )\n\n  function updateSteppingClasses() {\n    if (!cyRef.current) return\n    if (props.stepping !== prevStepping) {\n      for (let i = 0; i < prevStepping.length; i++) {\n        cyRef.current\n          .getElementById(prevStepping[i].state.data.id)\n          .removeClass('dfa__state--stepping')\n      }\n      setPrevStepping(props.stepping)\n\n      for (let i = 0; i < props.stepping.length; i++) {\n        cyRef.current\n          .getElementById(props.stepping[i].state.data.id)\n          .addClass('dfa__state--stepping')\n      }\n    }\n  }\n\n  function updateConfigHoveredClasses() {\n    if (!cyRef.current) return\n\n    // TODO: Refactor this\n    if (props.configHovered !== prevConfigHovered) {\n      setPrevConfigHovered(props.configHovered)\n      if (props.configHovered) {\n        let config = props.configHovered\n        do {\n          const node = cyRef.current.getElementById(config.state.data.id)\n          node.addClass('dfa__state--config-hover')\n\n          if (config.parent) {\n            const parent = cyRef.current.getElementById(\n              config.parent.state.data.id\n            )\n            parent.edgesTo(node).addClass('dfa__state--config-hover')\n          }\n\n          config = config.parent\n        } while (config)\n      } else if (prevConfigHovered) {\n        let config = prevConfigHovered\n        do {\n          const node = cyRef.current.getElementById(config.state.data.id)\n          node.removeClass('dfa__state--config-hover')\n\n          if (config.parent) {\n            const parent = cyRef.current.getElementById(\n              config.parent.state.data.id\n            )\n            parent.edgesTo(node).removeClass('dfa__state--config-hover')\n          }\n\n          config = config.parent\n        } while (config)\n      }\n    }\n  }\n}\n\n// Cytoscape that only uses elements as initial data\nclass UncontrolledCytoscape extends React.Component {\n  shouldComponentUpdate() {\n    return false\n  }\n\n  render() {\n    return <Cytoscape {...this.props} />\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fefefe',\n    width: '100%'\n  },\n  labelInputContainer: {\n    position: 'absolute',\n    transform: [{ translateX: '-50%' }, { translateY: '-50%' }]\n  },\n  labelInputRow: {\n    flexDirection: 'row'\n  },\n  labelInputAction: {\n    fontSize: 12,\n    paddingLeft: 4,\n    paddingRight: 4,\n    paddingTop: 4,\n    paddingBottom: 4\n  },\n  labelInputPicker: {\n    backgroundColor: 'rgba(244, 244, 244, 1)',\n    outlineWidth: 'thin',\n    margin: 2,\n    width: 80\n  },\n  labelInput: {\n    backgroundColor: 'rgba(244, 244, 244, 1)',\n    textAlign: 'center',\n    outlineWidth: 'thin',\n    margin: 2,\n    width: 80\n  },\n  labelInputText: {\n    fontSize: 16\n  }\n})\n\nexport default AutomataEditor\n","import React from 'react'\nimport { StyleSheet, View } from 'react-native'\nimport { Spring } from 'react-spring'\n\nexport function ZoomedModal(props) {\n  return (\n    <View style={styles.container}>\n      <Spring from={{ scale: 1.0 }} to={{ scale: props.showModal ? 0.9 : 1 }}>\n        {tStyles => (\n          <View\n            style={[{ transform: [{ scale: tStyles.scale }] }, styles.main]}\n          >\n            {props.main}\n          </View>\n        )}\n      </Spring>\n      {props.showModal && (\n        <React.Fragment>\n          <View style={styles.overlay} />\n          <View style={styles.modal}>{props.modal}</View>\n        </React.Fragment>\n      )}\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    position: 'relative',\n    height: '100%',\n    width: '100%'\n  },\n  main: {\n    height: '100%',\n    width: '100%'\n  },\n  overlay: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n    position: 'absolute',\n    height: '100%',\n    width: '100%'\n  },\n  modal: {\n    backgroundColor: 'white',\n    borderRadius: 4,\n    padding: 18,\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: [{ translateX: '-50%' }, { translateY: '-50%' }],\n    maxWidth: 800,\n    maxHeight: '90%',\n    overflow: 'scroll',\n    width: '90%'\n  }\n})\n\nexport default ZoomedModal\n","import React from 'react'\nimport { StyleSheet, Button, Text, View } from 'react-native'\n\nexport function Instructions(props) {\n  return (\n    <View style={styles.container}>\n      <Text style={styles.heading}>\n        WebFLAP is a modern finite automaton maker and visualizer\n      </Text>\n      <Text style={styles.text}>\n        Create a node by clicking anywhere on the canvas\n      </Text>\n      <Text style={styles.text}>\n        Click on the red circle and drag between two nodes to create an edge\n      </Text>\n      <Text style={styles.text}>\n        Long press/hold on a node/edge to show actions (edit labels, set as\n        initial/final state)\n      </Text>\n      <Text style={styles.textBottom}>\n        You can view these instructions again at any time by clicking 'How to\n        use' on the left\n      </Text>\n      <Text style={styles.actions}>\n        <Button title=\"Start Editing\" onPress={props.onClose} />\n      </Text>\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  container: {},\n  heading: {\n    textAlign: 'center',\n    fontSize: 18,\n    paddingTop: 4,\n    paddingBottom: 16\n  },\n  text: {\n    marginBottom: 8\n  },\n  textBottom: {\n    marginBottom: 16\n  },\n  actions: {\n    textAlign: 'center'\n  }\n})\n\nexport default Instructions\n","import React, { useCallback } from 'react'\nimport { StyleSheet, TouchableOpacity, Image, View, Text } from 'react-native'\nimport MathJax from 'react-mathjax2'\n\ntype SampleProps = {\n  sample: { id: string, uri: string, text: string },\n  selected: boolean,\n  onSelectSample: (id: string) => any\n}\n\nfunction Sample (props: SampleProps) {\n  const onSelectSample = useCallback(() => (\n    props.onSelectSample(props.sample.id)\n  ), [])\n  return (\n    <TouchableOpacity onPress={onSelectSample}>\n      <View\n        style={[\n          styles.sample,\n          props.selected && styles.sampleSelected\n        ]}\n      >\n        <div style={webstyles.title}>\n          <MathJax.Context\n            input='ascii'\n            script='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=AM_HTMLorMML'\n            options={{\n              asciimath2jax: {\n                useMathMLspacing: true,\n                delimiters: [[\"$$\",\"$$\"]],\n                preview: 'none',\n              }\n            }}\n          >\n            <MathJax.Text text={props.sample.text}/>\n          </MathJax.Context>\n        </div>\n      </View>\n    </TouchableOpacity>\n  )\n}\n\nconst styles = StyleSheet.create({\n  sample: {\n    cursor: 'pointer',\n    borderColor: 'rgba(0,0,0,0)',\n    borderWidth: 0,\n    borderLeftWidth: 3,\n    shadowOffset: { width: 0, height: 0 },\n    shadowColor: 'black',\n    shadowOpacity: 0.2,\n    shadowRadius: 1,\n    marginRight: 16,\n  },\n  sampleSelected: {\n    borderColor: '#5895F0',\n    borderWidth: 0,\n    borderLeftWidth: 3,\n    boxSizing: 'border-box',\n    overflow: 'hidden'\n  },\n  sampleImg: {\n    borderBottomWidth: 1,\n    borderColor: 'rgba(0,0,0,0.1)',\n    height: 200,\n    width: 200\n  },\n  text: {\n    marginBottom: 8\n  },\n})\n\nconst webstyles = {\n  title: {\n    fontSize: 12,\n    padding: 4\n  }\n}\n\nexport default Sample\n","export default {\n  initial: 'new58',\n  final: `[\"new63\"]`,\n  states: `[{\"data\":{\"id\":\"new58\",\"label\":\"q1\"},\"position\":{\"x\":127.67500000000007,\"y\":229},\"classes\":\"dfa__state dfa__state--initial\"},{\"data\":{\"id\":\"new36\",\"label\":\"q2\"},\"position\":{\"x\":235.4375,\"y\":171},\"classes\":\"dfa__state\"},{\"data\":{\"id\":\"new13\",\"label\":\"q3\"},\"position\":{\"x\":516.4096144329416,\"y\":171.96563697820625},\"classes\":\"dfa__state\"},{\"data\":{\"id\":\"new78\",\"label\":\"q5\"},\"position\":{\"x\":350.4128982470203,\"y\":94.20993578483262},\"classes\":\"dfa__state\"},{\"data\":{\"id\":\"new18\",\"label\":\"q4\"},\"position\":{\"x\":441.30149797976117,\"y\":331.4909346346748},\"classes\":\"dfa__state\"},{\"data\":{\"id\":\"new63\",\"label\":\"qacc\"},\"position\":{\"x\":255.02499999999986,\"y\":334},\"classes\":\"dfa__state dfa__state--final\"}]`,\n  transitions: `[[\"b404f265-422f-4db7-a0c9-d471879eabaa\",{\"id\":\"b404f265-422f-4db7-a0c9-d471879eabaa\",\"source\":\"new58\",\"target\":\"new36\",\"left\":\"0\",\"label\":\"${String.fromCharCode(\n    0x2423\n  )}\",\"right\":\"R\"}],[\"07ade13b-880a-4ab7-a342-a5c3242f8082\",{\"id\":\"07ade13b-880a-4ab7-a342-a5c3242f8082\",\"source\":\"new13\",\"target\":\"new13\",\"left\":\"x\",\"label\":\"x\",\"right\":\"R\"}],[\"6d6430b2-62f3-4df7-8676-79ac0acf8fcb\",{\"id\":\"6d6430b2-62f3-4df7-8676-79ac0acf8fcb\",\"source\":\"new36\",\"target\":\"new13\",\"left\":\"0\",\"label\":\"x\",\"right\":\"R\"}],[\"35862f3c-965f-44af-93d1-2132ebca76a3\",{\"id\":\"35862f3c-965f-44af-93d1-2132ebca76a3\",\"source\":\"new13\",\"target\":\"new78\",\"left\":\"${String.fromCharCode(\n    0x2423\n  )}\",\"label\":\"${String.fromCharCode(\n    0x2423\n  )}\",\"right\":\"L\"}],[\"845d130e-a98c-4c20-a981-621e965cf80a\",{\"id\":\"845d130e-a98c-4c20-a981-621e965cf80a\",\"source\":\"new78\",\"target\":\"new36\",\"left\":\"${String.fromCharCode(\n    0x2423\n  )}\",\"label\":\"${String.fromCharCode(\n    0x2423\n  )}\",\"right\":\"R\"}],[\"d62e354d-cfe7-4635-b7ae-c51fa58adc13\",{\"id\":\"d62e354d-cfe7-4635-b7ae-c51fa58adc13\",\"source\":\"new78\",\"target\":\"new78\",\"left\":\"0\",\"label\":\"0\",\"right\":\"L\"}],[\"0fb5d44f-ce7f-4e5e-855c-cf579dac6a78\",{\"id\":\"0fb5d44f-ce7f-4e5e-855c-cf579dac6a78\",\"source\":\"new18\",\"target\":\"new13\",\"left\":\"0\",\"label\":\"x\",\"right\":\"R\"}],[\"f1dd9596-0949-444b-a24a-4c9bca5a9837\",{\"id\":\"f1dd9596-0949-444b-a24a-4c9bca5a9837\",\"source\":\"new13\",\"target\":\"new18\",\"left\":\"0\",\"label\":\"0\",\"right\":\"R\"}],[\"8240d7f2-b62b-480f-92f2-df9fcba7f0ab\",{\"id\":\"8240d7f2-b62b-480f-92f2-df9fcba7f0ab\",\"source\":\"new36\",\"target\":\"new63\",\"left\":\"${String.fromCharCode(\n    0x2423\n  )}\",\"label\":\"${String.fromCharCode(\n    0x2423\n  )}\",\"right\":\"R\"}],[\"9ceb54ef-05e6-4cdb-8da9-aaeab7b88c43\",{\"id\":\"9ceb54ef-05e6-4cdb-8da9-aaeab7b88c43\",\"source\":\"new36\",\"target\":\"new36\",\"left\":\"x\",\"label\":\"x\",\"right\":\"R\"}],[\"e590e0f4-654a-4d1a-890e-4fa0b3e8d52d\",{\"id\":\"e590e0f4-654a-4d1a-890e-4fa0b3e8d52d\",\"source\":\"new18\",\"target\":\"new18\",\"left\":\"x\",\"label\":\"x\",\"right\":\"R\"}],[\"1b6a77cc-b2be-4a45-b9ef-784762ea684f\",{\"id\":\"1b6a77cc-b2be-4a45-b9ef-784762ea684f\",\"label\":\"x\",\"left\":\"x\",\"right\":\"L\",\"source\":\"new78\",\"target\":\"new78\"}]]`,\n  multipleInput: `[\"0\",\"00\",\"0000\",\"00000\"]`\n}\n","export default {\n  initial: 'new0',\n  final: '[\"new63\",\"new79\"]',\n  states:\n    '[{\"data\":{\"id\":\"new0\",\"label\":\"q1\"},\"position\":{\"x\":361,\"y\":70},\"classes\":\"dfa__state dfa__state--initial dfa__state--stepping\"},{\"data\":{\"id\":\"new64\",\"label\":\"q8\"},\"position\":{\"x\":360,\"y\":209},\"classes\":\"dfa__state\"},{\"data\":{\"id\":\"new79\",\"label\":\"qacc\"},\"position\":{\"x\":365.62344463125123,\"y\":319.04736968541204},\"classes\":\"dfa__state dfa__state--final\"},{\"data\":{\"id\":\"new52\",\"label\":\"q2\"},\"position\":{\"x\":259.69329810209547,\"y\":202.41148210417083},\"classes\":\"dfa__state\"},{\"data\":{\"id\":\"new70\",\"label\":\"q4\"},\"position\":{\"x\":264.0461686281381,\"y\":301.84664905104773},\"classes\":\"dfa__state\"},{\"data\":{\"id\":\"new84\",\"label\":\"q6\"},\"position\":{\"x\":362.6234446312513,\"y\":480.2818159979246},\"classes\":\"dfa__state\"},{\"data\":{\"id\":\"new21\",\"label\":\"q7\"},\"position\":{\"x\":19.297862119736443,\"y\":232.43877011869873},\"classes\":\"dfa__state\"},{\"data\":{\"id\":\"new57\",\"label\":\"q3\"},\"position\":{\"x\":507.0698534708441,\"y\":211.7306269520656},\"classes\":\"dfa__state\"},{\"data\":{\"id\":\"new39\",\"label\":\"q5\"},\"position\":{\"x\":509.6110016812612,\"y\":317.18827768437455},\"classes\":\"dfa__state\"}]',\n  transitions: `[[\"4ee307ff-2e39-4d90-add8-eeb61e0c96d7\",{\"id\":\"4ee307ff-2e39-4d90-add8-eeb61e0c96d7\",\"label\":\"#\",\"left\":\"#\",\"right\":\"R\",\"source\":\"new0\",\"target\":\"new64\"}],[\"13025fdc-e6cc-45da-bace-dcbaf73f91de\",{\"id\":\"13025fdc-e6cc-45da-bace-dcbaf73f91de\",\"label\":\"x\",\"left\":\"x\",\"right\":\"R\",\"source\":\"new64\",\"target\":\"new64\"}],[\"c9bd98ee-4ff9-4cdd-931a-52a389d839ce\",{\"id\":\"c9bd98ee-4ff9-4cdd-931a-52a389d839ce\",\"label\":\"${String.fromCharCode(\n    0x2423\n  )}\",\"left\":\"${String.fromCharCode(\n    0x2423\n  )}\",\"right\":\"R\",\"source\":\"new64\",\"target\":\"new79\"}],[\"21968863-c7a7-4f7a-9426-ba5a91b67756\",{\"id\":\"21968863-c7a7-4f7a-9426-ba5a91b67756\",\"label\":\"1\",\"left\":\"1\",\"right\":\"R\",\"source\":\"new52\",\"target\":\"new52\"}],[\"ef234d35-9399-4560-a9b7-334c0f78b94a\",{\"id\":\"ef234d35-9399-4560-a9b7-334c0f78b94a\",\"label\":\"x\",\"left\":\"0\",\"right\":\"R\",\"source\":\"new0\",\"target\":\"new52\"}],[\"23814de3-a59a-4785-898a-65df99c30503\",{\"id\":\"23814de3-a59a-4785-898a-65df99c30503\",\"label\":\"#\",\"left\":\"#\",\"right\":\"R\",\"source\":\"new52\",\"target\":\"new70\"}],[\"86aded89-f355-43c3-97d0-bbfd97fa05ea\",{\"id\":\"86aded89-f355-43c3-97d0-bbfd97fa05ea\",\"label\":\"x\",\"left\":\"x\",\"right\":\"R\",\"source\":\"new70\",\"target\":\"new70\"}],[\"c274e728-74d9-4331-8aa8-3a5f62259ff3\",{\"id\":\"c274e728-74d9-4331-8aa8-3a5f62259ff3\",\"label\":\"x\",\"left\":\"0\",\"right\":\"L\",\"source\":\"new70\",\"target\":\"new84\"}],[\"e580583c-4759-4718-8a51-e4cb34544b2a\",{\"id\":\"e580583c-4759-4718-8a51-e4cb34544b2a\",\"label\":\"0\",\"left\":\"0\",\"right\":\"L\",\"source\":\"new84\",\"target\":\"new84\"}],[\"456a740f-916f-48f7-8c24-0698bc217fa0\",{\"id\":\"456a740f-916f-48f7-8c24-0698bc217fa0\",\"label\":\"1\",\"left\":\"1\",\"right\":\"L\",\"source\":\"new84\",\"target\":\"new84\"}],[\"b4f3ada3-37f0-49d7-956f-3074fa16f77d\",{\"id\":\"b4f3ada3-37f0-49d7-956f-3074fa16f77d\",\"label\":\"x\",\"left\":\"x\",\"right\":\"L\",\"source\":\"new84\",\"target\":\"new84\"}],[\"90bf4304-dda4-4ea5-bf9c-c4a90b062cff\",{\"id\":\"90bf4304-dda4-4ea5-bf9c-c4a90b062cff\",\"label\":\"#\",\"left\":\"#\",\"right\":\"L\",\"source\":\"new84\",\"target\":\"new21\"}],[\"0b49a588-97d0-470f-b337-d0c020adc4eb\",{\"id\":\"0b49a588-97d0-470f-b337-d0c020adc4eb\",\"label\":\"x\",\"left\":\"x\",\"right\":\"R\",\"source\":\"new21\",\"target\":\"new0\"}],[\"0aea25b0-c37e-474b-a611-08e5153de6a4\",{\"id\":\"0aea25b0-c37e-474b-a611-08e5153de6a4\",\"label\":\"0\",\"left\":\"0\",\"right\":\"R\",\"source\":\"new57\",\"target\":\"new57\"}],[\"24f33977-192c-42b4-a45b-107aafc04d65\",{\"id\":\"24f33977-192c-42b4-a45b-107aafc04d65\",\"label\":\"0\",\"left\":\"0\",\"right\":\"R\",\"source\":\"new52\",\"target\":\"new52\"}],[\"eb0283b8-24dd-4d3e-8c99-0c7db729722b\",{\"id\":\"eb0283b8-24dd-4d3e-8c99-0c7db729722b\",\"label\":\"1\",\"left\":\"1\",\"right\":\"R\",\"source\":\"new57\",\"target\":\"new57\"}],[\"376841ca-45bd-4dd7-ae7b-2aabdc510014\",{\"id\":\"376841ca-45bd-4dd7-ae7b-2aabdc510014\",\"label\":\"x\",\"left\":\"1\",\"right\":\"R\",\"source\":\"new0\",\"target\":\"new57\"}],[\"bfd2051a-000d-4b8d-9256-5102f8af3714\",{\"id\":\"bfd2051a-000d-4b8d-9256-5102f8af3714\",\"label\":\"#\",\"left\":\"#\",\"right\":\"R\",\"source\":\"new57\",\"target\":\"new39\"}],[\"9b0a2aab-9a5c-44e1-869c-4eed6fb91c3f\",{\"id\":\"9b0a2aab-9a5c-44e1-869c-4eed6fb91c3f\",\"label\":\"x\",\"left\":\"1\",\"right\":\"L\",\"source\":\"new39\",\"target\":\"new84\"}],[\"de36e4af-cb82-4e20-93c3-48912209a561\",{\"id\":\"de36e4af-cb82-4e20-93c3-48912209a561\",\"label\":\"0\",\"left\":\"0\",\"right\":\"L\",\"source\":\"new21\",\"target\":\"new21\"}],[\"1afdc79c-35c5-4a8e-864f-9596ee0751e5\",{\"id\":\"1afdc79c-35c5-4a8e-864f-9596ee0751e5\",\"label\":\"1\",\"left\":\"1\",\"right\":\"L\",\"source\":\"new21\",\"target\":\"new21\"}],[\"11a08518-5e1f-43d2-a19b-cd6221d9bdd6\",{\"id\":\"11a08518-5e1f-43d2-a19b-cd6221d9bdd6\",\"label\":\"x\",\"left\":\"x\",\"right\":\"R\",\"source\":\"new39\",\"target\":\"new39\"}]]`,\n  multipleInput:\n    '[\"0#0\",\"1#1\",\"10#10\",\"101#101\",\"010101#010101\",\"010#101\",\"101#111\"]'\n}\n","export default {\n  initial: 'AYOw8O2GKRn0lGPP28-5N',\n  final:\n    '[\"new63\",\"1d1cb11e-1b11-4ab1-aa0d-e31749e37ac0\",\"0-bMeEqU7pJh0awZaZRsC\"]',\n  states:\n    '[{\"data\":{\"id\":\"pi6R36VEyWJKyUqKKUwHx\",\"label\":\"q1\"},\"position\":{\"x\":289,\"y\":321},\"classes\":\"dfa__state\"},{\"data\":{\"id\":\"dmys8BTRQuMohmTujkyCC\",\"label\":\"q2\"},\"position\":{\"x\":396,\"y\":230},\"classes\":\"dfa__state dfa__state--stepping\"},{\"data\":{\"id\":\"0-bMeEqU7pJh0awZaZRsC\",\"label\":\"qacc\"},\"position\":{\"x\":508,\"y\":318},\"classes\":\"dfa__state dfa__state--final\"},{\"data\":{\"id\":\"AYOw8O2GKRn0lGPP28-5N\",\"label\":\"q0\"},\"position\":{\"x\":405,\"y\":438},\"classes\":\"dfa__state dfa__state--initial\"}]',\n  transitions: `[[\"d99fcac0-df1f-4381-b260-4466beadc63f\",{\"id\":\"d99fcac0-df1f-4381-b260-4466beadc63f\",\"label\":\"${String.fromCharCode(\n    0x2423\n  )}\",\"left\":\"${String.fromCharCode(\n    0x2423\n  )}\",\"right\":\"R\",\"source\":\"pi6R36VEyWJKyUqKKUwHx\",\"target\":\"dmys8BTRQuMohmTujkyCC\"}],[\"36920930-430f-4eda-9c77-b3cbbe0b9c18\",{\"id\":\"36920930-430f-4eda-9c77-b3cbbe0b9c18\",\"label\":\"${String.fromCharCode(\n    0x2423\n  )}\",\"left\":\"${String.fromCharCode(\n    0x2423\n  )}\",\"right\":\"L\",\"source\":\"dmys8BTRQuMohmTujkyCC\",\"target\":\"pi6R36VEyWJKyUqKKUwHx\"}],[\"e71e6be0-559e-468d-9ef1-114f8717adad\",{\"id\":\"e71e6be0-559e-468d-9ef1-114f8717adad\",\"label\":\"0\",\"left\":\"0\",\"right\":\"R\",\"source\":\"AYOw8O2GKRn0lGPP28-5N\",\"target\":\"pi6R36VEyWJKyUqKKUwHx\"}],[\"bb8fc41b-0bf8-4505-aaf6-6a207868d15e\",{\"id\":\"bb8fc41b-0bf8-4505-aaf6-6a207868d15e\",\"label\":\"1\",\"left\":\"1\",\"right\":\"R\",\"source\":\"AYOw8O2GKRn0lGPP28-5N\",\"target\":\"0-bMeEqU7pJh0awZaZRsC\"}],[\"dcf04e95-ee53-4277-956d-3fd68994ff7f\",{\"id\":\"dcf04e95-ee53-4277-956d-3fd68994ff7f\",\"label\":\"0\",\"left\":\"0\",\"right\":\"R\",\"source\":\"pi6R36VEyWJKyUqKKUwHx\",\"target\":\"pi6R36VEyWJKyUqKKUwHx\"}]]`,\n  multipleInput: '[\"0\", \"00\", \"0000\", \"1\"]'\n}\n","import React, { useCallback, useState } from 'react'\nimport { StyleSheet, Button, Text, View } from 'react-native'\nimport Sample from './Sample'\nimport zeroN2Fixture from './0n2.fixture'\nimport wwFixture from './w#w.fixture'\nimport loopFixture from './loop.fixture'\n\ntype Props = {\n  onCancel: (e: any) => void,\n  onLoadFile: (data: any) => void\n}\n\nconst sample = {\n  id: '0n2',\n  uri: `${process.env.PUBLIC_URL}/assets/img/0n2.png`,\n  text: '$${0^{2^{n}}|n\\\\geq 0}$$ i.e. 0s whose length is a power of 2',\n  data: zeroN2Fixture\n}\n\nconst sample2 = {\n  id: 'w#w',\n  uri: `${process.env.PUBLIC_URL}/assets/img/w#w.png`,\n  text: '$${w\\#w| w \\in {0,1}^{\\ast}}$$ i.e. two identical strings separated by #',\n  data: wwFixture\n}\n\nconst sample3 = {\n  id: 'loop',\n  uri: `${process.env.PUBLIC_URL}/assets/img/loop.png`,\n  text: 'infinite loop example: loop on any 0, accept if first is 1 $${ 1w | w \\in {0,1}^{\\ast}}$$ ',\n  data: loopFixture\n}\n\nexport function Samples (props: Props) {\n  const [selected, setSelected] = useState(null) as [string | null, any]\n  const onLoadSample = useCallback((e) => {\n    if (selected === sample.id) {\n      props.onLoadFile(sample.data)\n    } else if (selected === sample2.id) {\n      props.onLoadFile(sample2.data)\n    } else if (selected === sample3.id) {\n      props.onLoadFile(sample3.data)\n    }\n  }, [selected])\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.samplesWindow}>\n        <Text style={styles.heading}>\n          My Files\n        </Text>\n        <View style={styles.myFiles}>\n          <Text style={styles.myFilesText}>Coming Soon...</Text>\n        </View>\n        <Text style={styles.heading}>\n          Turing Machine Examples\n        </Text>\n        <View style={styles.samples}>\n          <Sample selected={selected === sample.id} sample={sample} onSelectSample={setSelected} />\n          <Sample selected={selected === sample2.id} sample={sample2} onSelectSample={setSelected} />\n          <Sample selected={selected === sample3.id} sample={sample3} onSelectSample={setSelected} />\n        </View>\n      </View>\n      <View style={styles.actions}>\n        <View style={styles.cancelBtn}>\n          <Button title='Cancel' onPress={props.onCancel} color='#9D9D9D' />\n        </View>\n        <Button disabled={!selected} title='Load' onPress={onLoadSample} />\n      </View>\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  container: {},\n  heading: {\n    fontSize: 18,\n    paddingTop: 4,\n    paddingBottom: 16\n  },\n  samplesWindow: {\n  },\n  myFiles: {\n    backgroundColor: 'rgba(0, 0, 0, 0.1)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    height: 50,\n    marginBottom: 8\n  },\n  myFilesText: {\n    fontSize: 16\n  },\n  samples: {\n    // flexDirection: 'row'\n  },\n  text: {\n    marginBottom: 8\n  },\n  textBottom: {\n    marginBottom: 16\n  },\n  actions: {\n    justifyContent: 'flex-end',\n    flexDirection: 'row',\n    marginTop: 8\n  },\n  cancelBtn: {\n    marginRight: 8\n  }\n})\n\nexport default Samples\n","import React from 'react'\nimport { StyleSheet, Text } from 'react-native'\n\nexport default function Heading(props) {\n  return (\n    <Text accessibilityRole=\"heading\" style={[styles.heading, props.style]}>\n      {props.children}\n    </Text>\n  )\n}\n\nconst styles = StyleSheet.create({\n  heading: {\n    fontFamily: 'montserrat',\n    fontWeight: '400',\n    fontSize: '2rem'\n  }\n})\n","// https://github.com/devhubapp/devhub/blob/master/packages/components/src/hooks/use-hover.ts\n// mouseover/out -> mouseenter/leave\n// https://stackoverflow.com/questions/350639/how-to-disable-mouseout-events-triggered-by-child-elements\n\nimport { useEffect, useRef, useState } from 'react'\nimport { findDOMNode } from 'react-dom'\n\nimport { Platform } from 'react-native'\n\nexport default function useHover(ref, callback) {\n  if (Platform.OS !== 'web') return false\n\n  const cacheRef = useRef(false)\n  const [isHovered, setIsHovered] = useState(false)\n\n  useEffect(\n    () => {\n      const node = findNode(ref)\n\n      if (!(node && typeof node.addEventListener === 'function')) return\n\n      const resolve = value => {\n        if (cacheRef.current === value) return\n\n        cacheRef.current = value\n\n        if (callback) {\n          callback(value)\n          return\n        }\n\n        setIsHovered(value)\n      }\n\n      const handleMouseOver = () => resolve(true)\n      const handleMouseOut = () => resolve(false)\n\n      node.addEventListener('mouseenter', handleMouseOver)\n      node.addEventListener('mouseleave', handleMouseOut)\n\n      return () => {\n        if (!node) return\n\n        node.removeEventListener('mouseenter', handleMouseOver)\n        node.removeEventListener('mouseleave', handleMouseOut)\n      }\n    },\n    [ref && ref.current, callback]\n  )\n\n  return isHovered\n}\n\nexport function findNode(ref) {\n  let node = ref && (ref.current || ref)\n\n  if (node && node.getNode && node.getNode()) node = node.getNode()\n\n  if (node && node._touchableNode) node = node._touchableNode\n\n  if (node && node._node) node = node._node\n\n  if (Platform.OS === 'web') node = findDOMNode(node)\n\n  return node\n}\n","import React, { useEffect, useMemo, useRef, useState } from 'react'\nimport { StyleSheet, Text, View } from 'react-native'\n\ntype Props = {\n  tape: string,\n  head: number\n}\n\ntype CellProps = {\n  current?: boolean,\n  value: string,\n  ref?: any\n}\n\nconst TapeCell = React.forwardRef(function (props: CellProps, ref) {\n  return (\n    <div\n      ref={ref as any}\n      style={{\n        ...webstyles.cell,\n        ...(props.current ? webstyles.cellHighlighted : {})\n      }}\n    >\n      <Text style={[\n        styles.cellText,\n        props.current && styles.cellTextHighlighted\n      ]}>\n        {props.value}\n      </Text>\n    </div>\n  )\n})\n\n// TODO: make this scrolling more efficient, this scrolling is very dirty\nconst scrollToRef = (containerRef: any, ref: any) => {\n  if (ref.current && containerRef.current) {\n    containerRef.current.scrollTo(ref.current.offsetLeft - 191 / 2, 0)   \n  }\n}\n\nfunction Tape (props: Props) {\n  const tape = useMemo(() => props.tape.split(''), [props.tape])\n  const [isScrolled, setIsScrolled] = useState(false)\n  const cellRef = useRef(null)\n  const containerRef = useRef(null)\n\n  useEffect(() => {\n    setIsScrolled(true)\n    scrollToRef(containerRef, cellRef)\n  }, [props.head, tape])\n\n  return (\n    <div\n      ref={containerRef}\n      className='hide-scrollbar'\n      style={{\n        ...webstyles.container,\n        opacity: isScrolled ? 100 : 0\n      }}\n    >\n      {tape.map((cell, i) => (\n        <TapeCell\n          key={i}\n          value={cell}\n          current={i === props.head}\n          ref={i === props.head ? cellRef : undefined}\n        />\n      ))}\n    </div>\n  )\n}\n\nconst webstyles = {\n  container: {\n    backgroundColor: 'rgba(255,255,200,0.4)',\n    border: 0,\n    borderColor: 'gray',\n    borderStyle: 'dotted',\n    boxShadow: '0px 1px 3px rgba(0,0,0,0.2)',\n    boxSizing: 'border-box' as 'border-box',\n    display: 'flex' as 'flex',\n    flexDirection: 'row' as 'row',\n    marginBottom: 4,\n    marginTop: 4\n  },\n  cell: {\n    borderColor: 'gray',\n    borderWidth: 0,\n    borderRightWidth: 1,\n    borderStyle: 'dotted',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    minHeight: 19,\n    minWidth: 19,\n    paddingBottom: 2\n  },\n  cellHighlighted: {\n    backgroundColor: 'black'\n  }\n}\n\nconst styles = StyleSheet.create({\n  cellText: {\n    textAlign: 'center'\n  },\n  cellTextHighlighted: {\n    color: 'white',\n    textAlign: 'center'\n  }\n})\n\nexport default Tape\n","import React, { useRef, useState } from 'react'\nimport { StyleSheet, Text, View } from 'react-native'\nimport { isConfigAccepted } from '../helpers'\nimport useHover from '../../core/hooks/useHover'\nimport Tape from '../Tape'\n\nexport default function Configurations(props) {\n  return (\n    <View style={styles.container}>\n      {props.rejected.map(config => (\n        <Config\n          rejected\n          type={props.type}\n          key={config.hash}\n          config={config}\n          onHover={props.onConfigHover}\n          finalStates={props.finalStates}\n        />\n      ))}\n      {props.configurations.map(config => (\n        <Config\n          type={props.type}\n          key={config.hash}\n          config={config}\n          onHover={props.onConfigHover}\n          finalStates={props.finalStates}\n        />\n      ))}\n    </View>\n  )\n}\n\nfunction Config(props) {\n  const touchableRef = useRef(null)\n  const [isHovered, setIsHovered] = useState(false)\n  useHover(touchableRef, hovering => {\n    setIsHovered(hovering)\n    props.onHover(props.config, hovering)\n  })\n\n  return (\n    <View\n      ref={touchableRef}\n      style={[\n        styles.config,\n        !!isHovered && styles.configHovered,\n        props.rejected && styles.configRejected,\n        isConfigAccepted(props.finalStates, props.config) && styles.configFinal\n      ]}\n    >\n      <Text>{props.config.state.data.label}</Text>\n      {props.type === 'dfa' && (\n        <Text>\n          <Text style={styles.processed}>{getProcessedStr(props.config)}</Text>\n          <Text style={styles.unprocessed}>{props.config.unprocessed}</Text>\n        </Text>\n      )}\n      {props.type === 'tm' && (\n        <Tape tape={props.config.tape} head={props.config.head} />\n      )}\n    </View>\n  )\n}\n\n// TODO: put this in a helper\nconst getProcessedStr = config =>\n  config.input.substr(0, config.input.length - config.unprocessed.length)\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'column'\n  },\n  config: {\n    borderColor: 'rgba(0, 0, 0, 0.1)',\n    borderRadius: 4,\n    borderWidth: 1,\n    marginBottom: 8,\n    padding: 8,\n    cursor: 'pointer',\n    minHeight: 50\n  },\n  configHovered: {\n    borderColor: 'rgba(0, 0, 0, 0.15)',\n    boxShadow: '0 3px 9px 0 rgba(46, 50, 60, .09)'\n  },\n  configRejected: {\n    backgroundColor: '#ffebee'\n  },\n  configFinal: {\n    backgroundColor: '#ccff90'\n  },\n  processed: {\n    color: 'green'\n  },\n  unprocessed: {\n    color: 'red'\n  }\n})\n","import React from 'react'\nimport { StyleSheet, Text, View } from 'react-native'\n\ntype Props = {\n  config: {\n    done: boolean,\n    value: string | object\n  },\n  onSimulateStepByStep: (event: MouseEvent) => void,\n  onContinue: (event: MouseEvent) => void,\n}\n\nfunction Panel (props: Props) {\n  const paused = props.config && !props.config.done\n\n  return (\n    <View style={styles.panel}>\n      {paused && (\n        <View>\n          <Text style={webStyles.text}>\n            ! Paused - simulation is taking too many steps\n          </Text>\n          <View style={styles.accent}>\n            <Text style={webStyles.text}>{props.config.value} configurations generated</Text>\n            <a style={webStyles.textLink} onClick={props.onContinue as any}>Continue?</a>\n          </View>\n        </View>\n      )}\n      <a style={webStyles.textLink} onClick={props.onSimulateStepByStep as any}>Simulate Step by Step</a>\n    </View>\n  )\n}\n\nPanel.defaultProps = {\n  config: {}\n}\n\nconst webStyles = {\n  text: {\n    fontSize: 14,\n    marginTop: 4\n  },\n  textLink: {\n    cursor: 'pointer',\n    fontSize: 14,\n    marginTop: 4\n  }\n}\n\nconst styles = StyleSheet.create({\n  panel: {\n    borderColor: 'rgba(0, 0, 0, 0.3)',\n    borderLeftWidth: 1,\n    paddingLeft: 8,\n    marginBottom: 8,\n    marginLeft: 4\n  },\n  accent: {\n    marginLeft: 12\n  }\n})\n\nexport default Panel\n","import React, { useCallback, useEffect, useRef, useState } from 'react'\nimport { PulseLoader } from 'react-spinners'\nimport { StyleSheet, TouchableOpacity, View, Text } from 'react-native'\nimport Panel from './Panel'\nimport useHover from '../../core/hooks/useHover'\n\ntype Config = {\n  done: boolean,\n  value: any\n}\n\ntype Props = {\n  strings: Array<string>,\n  configs: Array<Config>,\n  continueConfig: (index: number) => void,\n  onConfigHover: Function,\n  onInputPress: Function\n}\n\ntype RowProps = {\n  string: string,\n  config: Config,\n  configIndex: number,\n  continueConfig: (index: number) => void,\n  onHover: Function,\n  onInputPress: Function\n}\n\nfunction MultipleInput(props: Props) {\n  return (\n    <View>\n      {props.strings.map((string, i) => (\n        <Row\n          key={string}\n          string={string}\n          configIndex={i}\n          config={props.configs[i]}\n          continueConfig={props.continueConfig}\n          onHover={props.onConfigHover}\n          onInputPress={props.onInputPress}\n        />\n      ))}\n    </View>\n  )\n}\n\nMultipleInput.defaultProps = {\n  onHover: () => {},\n  onInputPress: () => {}\n}\n\nfunction Row(props: RowProps) {\n  const accepted = props.config && (props.config.value && props.config.done)\n  const loading = false\n\n  const touchableRef = useRef(null)\n  const [isHovered, setIsHovered] = useState(false)\n  const [isExpanded, setIsExpanded] = useState(false)\n  useHover(touchableRef, (hovering: any) => {\n    if (props.config) {\n      setIsHovered(hovering)\n\n      if (props.config.done) {\n        props.onHover(props.config.value, hovering)\n      }\n    }\n  })\n  useEffect(\n    () => {\n      return () => {\n        props.onHover(null, false)\n      }\n    },\n    ['once']\n  )\n  const onPress = useCallback(() => {\n    setIsExpanded(b => !b)\n  }, [setIsExpanded])\n  const onSimulateStepByStep = useCallback(() => {\n    props.onInputPress(props.string)\n  }, [props.onInputPress])\n  const onContinue = useCallback(() => {\n    props.continueConfig(props.configIndex)\n  }, [props.config, props.continueConfig, props.configIndex])\n\n  return (\n    <View>\n      <TouchableOpacity onPress={onPress}>\n        <View\n          ref={touchableRef}\n          data-for={`pause-warning-${props.string}`}\n          data-tip\n          style={[\n            styles.row,\n            accepted && styles.rowAccepted,\n            !accepted && styles.rowRejected,\n            accepted && isHovered && styles.rowHoveredAccepted,\n            !accepted && isHovered && styles.rowHoveredRejected\n          ]}\n        >\n          <Text>{props.string}</Text>\n          <View>\n            <RowStatusIcon\n              config={props.config}\n            />\n            {loading && (\n              <View style={styles.loadingContainer}>\n                <PulseLoader\n                  color=\"rgba(0, 0, 0, 1)\"\n                  loading\n                  size={4}\n                  sizeUnit={'px'}\n                />\n              </View>\n            )}\n          </View>\n        </View>\n      </TouchableOpacity>\n      {isExpanded && (\n        <Panel\n          config={props.config}\n          onContinue={onContinue as any}\n          onSimulateStepByStep={onSimulateStepByStep as any}\n        />\n      )}\n    </View>\n  )\n}\n\ntype RowStatusIconProps = {\n  config: any\n}\n\nfunction RowStatusIcon (props: RowStatusIconProps) {\n  if (props.config && !props.config.done) {\n    return (\n      <Text>!</Text>\n    )\n  }\n\n  return (<React.Fragment />)\n}\n\nexport default MultipleInput\n\nconst styles = StyleSheet.create({\n  row: {\n    borderTopColor: 'rgba(0,0,0,0.02)',\n    borderRadius: 2,\n    borderTopWidth: 1,\n    cursor: 'pointer',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 1,\n    paddingLeft: 8,\n    paddingRight: 8,\n    paddingTop: 4,\n    paddingBottom: 4\n  },\n  rowAccepted: {\n    backgroundColor: '#ccff90'\n  },\n  rowRejected: {\n    backgroundColor: '#ffebee'\n  },\n  rowHovered: {\n    backgroundColor: 'rgba(0,0,0,0.03)'\n  },\n  rowHoveredAccepted: {\n    backgroundColor: '#b2fe7c'\n  },\n  rowHoveredRejected: {\n    backgroundColor: '#ffd1d8'\n  },\n  loadingContainer: {\n    position: 'relative',\n    bottom: 3\n  }\n})\n","import React, { useState } from 'react'\nimport { StyleSheet, Button, Text, TextInput, View } from 'react-native'\nimport Dropzone from 'react-dropzone'\nimport Heading from '../../core/Heading'\n\nexport default function MultipleInputEditor(props) {\n  const [multilineInput, setMultipleInput] = useState(\n    props.currMultipleInput.join('\\n')\n  )\n  const onMultilineInputChange = e => {\n    setMultipleInput(e.target.value)\n  }\n  const onSaveMultilineInput = e => {\n    props.onSaveMultilineInput(multilineInput.split('\\n'))\n  }\n  const onDrop = (files, rejectedFiles) => {\n    if (rejectedFiles.length !== 0) {\n      // TODO: Make this look better\n      alert('Please use plain/text (.txt) formats!')\n    }\n\n    const reader = new FileReader()\n    reader.onload = function(e) {\n      props.onSaveMultilineInput(e.target.result.split('\\n'))\n    }\n    reader.readAsText(files[0], 'UTF-8')\n  }\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.column}>\n        <Heading style={styles.heading}>\n          Edit Test Input\n          <Text style={styles.headingSmall}>\n            (separate test input by newline)\n          </Text>\n        </Heading>\n        <TextInput\n          style={styles.editorText}\n          value={multilineInput}\n          onChange={onMultilineInputChange}\n          multiline\n          placeholer=\"Input cases\"\n        />\n        <Button title=\"Save\" onPress={onSaveMultilineInput} />\n      </View>\n      <View style={[styles.column, styles.columnEditor]}>\n        <Dropzone accept=\"text/plain\" onDrop={onDrop}>\n          {({ getRootProps, getInputProps, isDragActive }) => (\n            <div\n              {...getRootProps()}\n              style={{\n                ...styles.upload,\n                ...(isDragActive ? styles.uploadDragActive : {})\n              }}\n            >\n              {isDragActive ? (\n                'Drop files here...'\n              ) : (\n                <div>\n                  <div style={styles.uploadLabel}>Drag Input File</div>\n                  <small style={styles.uploadLabel}>or</small>\n                  <div>Click to Browse Input File</div>\n                </div>\n              )}\n              <input {...getInputProps()} />\n            </div>\n          )}\n        </Dropzone>\n      </View>\n      <View style={styles.or}>\n        <Text style={styles.orText}>OR</Text>\n      </View>\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    position: 'relative',\n    flex: 1,\n    flexDirection: 'row',\n    height: '100%',\n    width: '100%'\n  },\n  or: {\n    position: 'absolute',\n    left: '50%',\n    top: '50%',\n    transform: [{ translateX: '-50%' }, { translateY: '-50%' }],\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'white',\n    borderRadius: 50,\n    boxShadow: '0 0 16px rgba(0, 0, 0, 0.3)',\n    height: 60,\n    width: 60\n  },\n  orText: {\n    fontSize: 24\n  },\n  column: {\n    padding: 22,\n    flex: 1\n  },\n  heading: {\n    fontSize: 18,\n    paddingBottom: 4\n  },\n  headingSmall: {\n    fontSize: 13,\n    marginLeft: 4,\n    color: '#808080'\n  },\n  columnEditor: {\n    backgroundColor: '#efefef'\n  },\n  editorText: {\n    boxShadow: 'inset 0 0 4px #b0b0b0',\n    height: '100%',\n    padding: 8,\n    marginTop: 4,\n    marginBottom: 4,\n    lineHeight: 18,\n    outlineStyle: 'none'\n  }\n})\n\nstyles.upload = {\n  borderWidth: 2,\n  borderStyle: 'dashed',\n  borderColor: '#e0e0e0',\n  cursor: 'pointer',\n  display: 'flex',\n  flex: 1,\n  flexDirection: 'column',\n  alignContent: 'center',\n  justifyContent: 'center',\n  height: '100%',\n\n  color: '#909090',\n  fontSize: 24,\n  textAlign: 'center'\n}\nstyles.uploadDragActive = {\n  color: '#2096F3',\n  borderColor: '#2096F3'\n}\nstyles.uploadLabel = {\n  display: 'block',\n  paddingBottom: 8\n}\n","import React from 'react'\nimport { StyleSheet, Button, TextInput, View } from 'react-native'\n\nexport default function Controls(props) {\n  return (\n    <View>\n      <View style={styles.textWithButtonContainer}>\n        <TextInput\n          value={props.inputString}\n          onChange={props.onInputStringChange}\n          style={styles.input}\n          placeholder=\"Input String\"\n          autoFocus\n        />\n        <Button style={styles.control} title=\"GO\" onPress={props.onPlay} />\n      </View>\n      {props.isStepByStepStarted && (\n        <View style={styles.controls}>\n          <Button style={styles.control} title=\"Reset\" onPress={props.onPlay} />\n          <View style={styles.controlGap} />\n          <Button style={styles.control} title=\"Next\" onPress={props.onNext} />\n        </View>\n      )}\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  textWithButtonContainer: {\n    flexDirection: 'row',\n    marginBottom: 8\n  },\n  input: {\n    backgroundColor: 'rgba(240, 240, 240, 1)',\n    borderColor: 'rgba(0,0,0,0.2)',\n    borderWidth: 1,\n    fontSize: 14,\n    outlineStyle: 'none',\n    padding: 8\n  },\n  controls: {\n    flexDirection: 'row',\n    marginBottom: 8\n  },\n  controlGap: {\n    width: 4\n  }\n})\n","import React, { useRef } from 'react'\nimport { StyleSheet, Text, View } from 'react-native'\nimport useHover from '../../../core/hooks/useHover'\n\nfunction Links(props) {\n  const howToUseRef = useRef(null)\n  const howToUseHover = useHover(howToUseRef)\n\n  const sourceCodeRef = useRef(null)\n  const sourceCodeHover = useHover(sourceCodeRef)\n\n  const issueRef = useRef(null)\n  const issueHover = useHover(issueRef)\n\n  return (\n    <View>\n      <View ref={howToUseRef} style={styles.linkContainer}>\n        <Text\n          style={[styles.link, howToUseHover && styles.linkHover]}\n          onPress={props.onViewInstructions}\n        >\n          How to use\n        </Text>\n      </View>\n      <View ref={sourceCodeRef} style={styles.linkContainer}>\n        <Text\n          style={[styles.link, sourceCodeHover && styles.linkHover]}\n          accessibilityRole=\"link\"\n          target=\"_blank\"\n          href=\"//github.com/Secretmapper/webflap\"\n        >\n          Source code\n        </Text>\n      </View>\n      <View ref={issueRef} style={[styles.linkContainer, styles.linkBottom]}>\n        <Text\n          style={[styles.link, issueHover && styles.linkHover]}\n          accessibilityRole=\"link\"\n          target=\"_blank\"\n          href=\"//github.com/Secretmapper/webflap/issues\"\n        >\n          Report issues\n        </Text>\n      </View>\n      <View>\n        <Text style={styles.authorLinkContainer}>\n          <Text>Made by </Text>\n          <Text\n            style={styles.authorLink}\n            accessibilityRole=\"link\"\n            target=\"_blank\"\n            href=\"//github.com/Secretmapper\"\n          >\n            @secretmapper\n          </Text>\n        </Text>\n      </View>\n    </View>\n  )\n}\n\nexport default Links\n\nconst styles = StyleSheet.create({\n  linkContainer: {\n    borderTopColor: 'rgba(0, 0, 0, 0.05)',\n    borderTopWidth: 1\n  },\n  linkBottom: {\n    borderBottomColor: 'rgba(0, 0, 0, 0.05)',\n    borderBottomWidth: 1\n  },\n  link: {\n    fontFamily: 'montserrat',\n    fontSize: 13,\n    borderRadius: 3,\n    color: '#818387',\n    display: 'block',\n    marginLeft: -10,\n    marginRight: -10,\n    paddingBottom: 8,\n    paddingLeft: 15,\n    paddingRight: 15,\n    paddingTop: 8\n  },\n  linkHover: {\n    backgroundColor: 'rgba(0, 0, 0, 0.03)',\n    color: 'black',\n    cursor: 'pointer'\n  },\n  authorLinkContainer: {\n    paddingBottom: 10,\n    paddingTop: 10\n  },\n  authorLink: {\n    color: '#71BCF7'\n  },\n  navLink: {\n    paddingBottom: 4,\n    marginBottom: 4\n  }\n})\n","import React, { useCallback, useState } from 'react'\nimport { StyleSheet, Button, Picker, View } from 'react-native'\nimport Modal from 'modal-enhanced-react-native-web'\nimport Heading from '../../core/Heading'\nimport Configurations from '../Configurations'\nimport MultipleInput from '../MultipleInput'\nimport MultipleInputEditor from '../MultipleInputEditor'\nimport StepByStepControls from '../StepByStepControls'\nimport Links from './Links'\n\nexport default function Controls(props) {\n  const [tab, setTab] = useState(null)\n  const [showModal, setShowModal] = useState(false)\n\n  const {\n    inputString,\n    onInputStringChange,\n    onNext,\n\n    finalStates,\n    rejectedConfigs,\n    configs,\n    onConfigHover,\n\n    layout,\n    setLayout,\n\n    saveAsImage,\n\n    multipleInput,\n    multipleInputConfigs\n  } = props\n\n  const onSaveMultilineInput = value => {\n    setShowModal(false)\n    props.setMultipleInput(value)\n  }\n\n  const onInputPress = value => {\n    // XXX: don't simulate an event here\n    onInputStringChange({ target: { value } })\n    setTab('stepByStep')\n  }\n\n  const [isStepByStepStarted, setIsStepByStepStarted] = useState(false)\n  const onPlay = useCallback(\n    () => {\n      setIsStepByStepStarted(true)\n      props.onPlay()\n    },\n    [props.setIsStepByStepStarted, props.onPlay]\n  )\n\n  return (\n    <View style={styles.side}>\n      <Heading style={styles.heading}>WebFLAP</Heading>\n      <Heading style={styles.subheading}>\n        Modern Finite Automaton Maker and Visualizer\n      </Heading>\n      <View style={styles.main}>\n        <Modal\n          style={styles.modal}\n          transparent={true}\n          isVisible={showModal}\n          onBackdropPress={() => setShowModal(false)}\n        >\n          {showModal && (\n            <MultipleInputEditor\n              currMultipleInput={props.multipleInput}\n              onSaveMultilineInput={onSaveMultilineInput}\n            />\n          )}\n        </Modal>\n        {tab === null && (\n          <React.Fragment>\n            <NavButton\n              title=\"Step by Step\"\n              onPress={() => setTab('stepByStep')}\n            />\n            <NavButton\n              title=\"Run Multiple\"\n              onPress={() => setTab('multipleRun')}\n            />\n            <NavButton\n              title=\"Save as Image\"\n              onPress={() => setTab('saveAsImage')}\n            />\n            <Picker selectedValue={layout} onValueChange={setLayout}>\n              <Picker.Item label=\"Random\" value=\"random\" />\n              <Picker.Item label=\"Grid\" value=\"grid\" />\n              <Picker.Item label=\"Circle\" value=\"circle\" />\n              <Picker.Item label=\"Concentric\" value=\"concentric\" />\n              <Picker.Item label=\"Breadthfirst\" value=\"breadthfirst\" />\n              <Picker.Item label=\"Cose\" value=\"cose\" />\n            </Picker>\n          </React.Fragment>\n        )}\n        {tab === 'multipleRun' && (\n          <React.Fragment>\n            <NavButton title=\"Load Inputs\" onPress={() => setShowModal(true)} />\n            <NavButton title=\"Run Inputs\" onPress={props.runMultipleInput} />\n            <MultipleInput\n              strings={multipleInput}\n              configs={multipleInputConfigs}\n              continueConfig={props.continueConfig}\n              onConfigHover={onConfigHover}\n              onInputPress={onInputPress}\n            />\n          </React.Fragment>\n        )}\n        {tab === 'saveAsImage' && (\n          <React.Fragment>\n            <NavButton\n              title=\"Save as PNG\"\n              onPress={() => saveAsImage('image/png')}\n            />\n            <NavButton\n              title=\"Save as JPEG\"\n              onPress={() => saveAsImage('image/jpeg')}\n            />\n          </React.Fragment>\n        )}\n        {tab === 'stepByStep' && (\n          <React.Fragment>\n            <StepByStepControls\n              inputString={inputString}\n              onInputStringChange={onInputStringChange}\n              isStepByStepStarted={isStepByStepStarted}\n              onPlay={onPlay}\n              onNext={onNext}\n            />\n            {isStepByStepStarted && (\n              <Configurations\n                type=\"tm\"\n                finalStates={finalStates}\n                rejected={rejectedConfigs}\n                configurations={configs}\n                onConfigHover={onConfigHover}\n              />\n            )}\n          </React.Fragment>\n        )}\n      </View>\n      {tab !== null && (\n        <NavButton color=\"#9e9e9e\" title=\"Back\" onPress={() => setTab(null)} />\n      )}\n      {tab === null && (\n        <View>\n          <NavButton\n            title=\"Share\"\n            onPress={props.onShare}\n            disabled={props.isSharing}\n          />\n          <NavButton\n            title=\"Open Files/Examples\"\n            onPress={props.onViewOtherFiles}\n          />\n        </View>\n      )}\n      <Links onViewInstructions={props.onViewInstructions} />\n    </View>\n  )\n}\n\nfunction NavButton(props) {\n  return (\n    <View style={styles.navLink}>\n      <Button {...props} />\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  side: {\n    borderRightWidth: 1,\n    borderColor: '#e1e4e8',\n    padding: 20,\n    height: '100%'\n  },\n  main: {\n    overflow: 'scroll',\n    marginBottom: 8,\n    flex: 1\n  },\n  modal: {\n    alignItems: 'center',\n    backgroundColor: 'white',\n    borderColor: 'rgba(0, 0, 0, 0.1)',\n    borderRadius: 4,\n    justifyContent: 'center',\n    overflow: 'hidden'\n  },\n  heading: {\n    textAlign: 'center'\n  },\n  subheading: {\n    textAlign: 'center',\n    fontSize: 13,\n    paddingTop: 4,\n    paddingBottom: 8\n  },\n  linkContainer: {\n    borderTopColor: 'rgba(0, 0, 0, 0.05)',\n    borderTopWidth: 1\n  },\n  linkBottom: {\n    borderBottomColor: 'rgba(0, 0, 0, 0.05)',\n    borderBottomWidth: 1\n  },\n  link: {\n    display: 'block',\n    paddingBottom: 8,\n    paddingTop: 8,\n    paddingLeft: 15,\n    paddingRight: 15,\n    marginLeft: '-15px',\n    marginRight: '-15px',\n    color: '#818387',\n    borderRadius: 3\n  },\n  authorLinkContainer: {\n    paddingBottom: 10,\n    paddingTop: 10\n  },\n  authorLink: {\n    color: '#71BCF7'\n  },\n  navLink: {\n    paddingBottom: 4,\n    marginBottom: 4\n  }\n})\n","import React, { useCallback } from 'react'\nimport copy from 'copy-text-to-clipboard'\n\nfunction ShareLink (props: { url: string }) {\n  const onClick = useCallback(() => {\n    copy(props.url)\n  }, [props.url])\n\n  return (\n    <div className='share-link' style={styles.container} onClick={onClick}>\n      <div style={styles.heading}>Share Link: <small>(Click to copy)</small></div>\n      <div style={styles.text}>{props.url}</div>\n    </div>\n  )\n}\n\nconst styles = {\n  container: {\n    cursor: 'pointer',\n    padding: 8,\n    width: '100%'\n  },\n  heading: {\n    fontWeight: 'bold',\n    fontSize: 12\n  },\n  text: {\n    fontSize: 16\n  }\n} as { [s: string]: React.CSSProperties }\n\nexport default ShareLink\n","import nanoid from 'nanoid'\nimport {\n  AutomataConfiguration,\n  AutomataTransitions,\n  initialConfig as automataInitialConfig,\n  resolveConfig as resolveConfigRaw,\n  BLANK_CODE\n} from './index'\n\n/**\n * Configuration of the current state step in an tm\n **/\n// TODO: properly split automata and tm type\nexport type TuringMachineConfiguration = AutomataConfiguration & {\n  head: number,\n  // XXX: Use a string buffer?\n  tape: string\n}\n\nexport function initialConfig (initialState: number, input = 'bc') {\n  return {\n    ...automataInitialConfig(initialState, input),\n    tape: input + BLANK_CODE.repeat(Math.max(0, 20 - input.length)),\n    head: 0\n  }\n}\n\nfunction moveHead(\n  head: number,\n  direction: 'L' | 'R'\n) {\n  if (direction === 'L') {\n    return head - 1\n  } else if (direction === 'R') {\n    return head + 1\n  }\n\n  throw new Error('Tape direction is invalid')\n\n  return head\n}\n\nfunction writeHead(\n  tape: string,\n  head: number,\n  toWrite: string\n) {\n  return tape.substr(0, head) + toWrite + tape.substr(head + 1)\n}\n\nexport function step (\n  transitions:AutomataTransitions,\n  configuration: TuringMachineConfiguration\n): Array<TuringMachineConfiguration> {\n  const configs: Array<TuringMachineConfiguration> = []\n\n  // XXX: map && compact this?\n  transitions.forEach((transition) => {\n    if (configuration.state.data.id !== transition.source.data.id) {\n      return \n    }\n\n    const toRead = transition.left\n    const toWrite = transition.label\n    const toMove = transition.right\n\n    const headSymbol = configuration.tape[configuration.head]\n    const isValidRead = headSymbol === toRead || toRead === BLANK_CODE && headSymbol === ' '\n\n    if (isValidRead) {\n      let tape = writeHead(configuration.tape, configuration.head, toWrite)\n      let head = moveHead(configuration.head, toMove)\n\n      if (head >= configuration.tape.length) {\n        tape += BLANK_CODE.repeat(Math.min(100, configuration.tape.length))\n      } else if (head < 0) {\n        tape = BLANK_CODE.repeat(Math.abs(head)) + tape\n        head = 0\n      }\n\n      configs.push({\n        // TODO: use a hash from the path?\n        hash: nanoid(),\n        parent: configuration,\n        state: transition.target,\n        input: configuration.input,\n        tape,\n        head,\n        unprocessed: ''\n      })\n    }\n  })\n\n  return configs\n}\n\nexport function isConfigAccepted(finalStates: Set<string>, config: AutomataConfiguration) {\n  return (finalStates.has(config.state.data.id))\n}\n\nexport function resolveConfig(\n  transitions: AutomataTransitions,\n  configuration: AutomataConfiguration,\n  finalStates: Set<string>,\n) {\n  return resolveConfigRaw(transitions, configuration, finalStates, step, isConfigAccepted)\n}\n\n/**\n * Lazily resolves configuration\n *\n * @remarks\n * TODO: Needs to have a dfa version\n */\nexport function* lazyResolveConfig(\n  transitions:AutomataTransitions,\n  configuration: AutomataConfiguration,\n  finalStates: Set<string>,\n  // count of configurations each iteration to 'pause' at\n  configSteps: number = 100,\n  // TODO: this should be a generic\n  stepFn: (transitions: AutomataTransitions, configuration: any) => Array<any> = step,\n  isConfigAcceptedFn: (finalStates: Set<string>, config: any) => boolean = isConfigAccepted\n) {\n  const lIsConfigAccepted = (config: AutomataConfiguration) => isConfigAcceptedFn(finalStates, config)\n  let configs: Array<any> = [configuration]\n\n  let stepIterations = 1\n  let configCount = configSteps\n\n  do {\n    let newConfigs: Array<any> = []\n\n    for (let i = 0; i < configs.length; i++) {\n      if (lIsConfigAccepted(configs[i])) {\n        return configs[i]\n      }\n    }\n\n    for (let i = 0; i < configs.length; i++) {\n      newConfigs = newConfigs.concat(stepFn(transitions, configs[i]))\n\n      configCount--\n\n      if (configCount === 0) {\n        yield stepIterations * configSteps\n        configCount = configSteps\n        stepIterations++\n      }\n    }\n\n    configs = newConfigs.slice()\n  } while (configs.length !== 0)\n\n  return null\n}\n","// TODO: we're sharing credentials \\o/\nexport const SECRET_KEY =\n  '$2a$10$C3/5kVnWddDXzV9lVUASCOjrO48j1B.hOzwcW9hvaKHWtqOswWgDC'\nexport const COLLECTION_ID = '5cf3c85f3185c64c762b627c'\n","import { useCallback, useMemo, useState } from 'react'\nimport { makeTMTransitionLabel } from '../helpers'\nimport { SECRET_KEY, COLLECTION_ID } from './creds'\nimport wwFixture from '../Samples/w#w.fixture'\n\ntype Transition = { id: string, source: any, target: any, left: string, label: string, right: string }\ntype UseSavedAutomataArray = [\n  // elements\n  any,\n  // initialState\n  string,\n  // setInitialState\n  Function,\n  // finalStates\n  Set<string>,\n  // setFinalStates\n  Function,\n  // setStates\n  Function,\n  // transitions\n  Map<string, Transition>,\n  // setTransitions\n  Function,\n  // inputString\n  string,\n  // setInputString\n  Function,\n  // multipleInput\n  Array<string>,\n  // setMultipleInput\n  Function,\n  // onShare\n  Function,\n  // isSharing\n  boolean\n]\n\nexport function serializeTransitionMap (map: Map<string, Transition>) {\n  return JSON.stringify(\n    Array\n      .from(map)\n      .map(([k, v]) => [k, { ...v, source: v.source.data.id, target: v.target.data.id }])\n  )\n}\n\nfunction deserializeTransitionMap (transitionsString: string, statesMap: Map<string, any>): Map<string, Transition> {\n  const transitionsArray = JSON.parse(transitionsString)\n\n  // link transitions with states\n  const transitions = new Map(\n    transitionsArray.map(([k, v]: [string, any]) => {\n      return [\n        k,\n        {\n          ...v,\n          source: statesMap.get(v.source),\n          target: statesMap.get(v.target)\n        }\n      ]\n    })\n  )\n\n  return transitions as Map<string, Transition>\n}\n\nexport function serializeFinalStates (finalStates: Set<string>) {\n  return JSON.stringify(Array.from(finalStates))\n}\n\nexport default function useSavedAutomata(\n  useStorage: (key: string, v: string) => any,\n  defaults: { statesDefault: string, transitionsDefault: string, finalStatesDefault: string, initialStateDefault: string }\n): UseSavedAutomataArray {\n  const {\n    statesDefault,\n    transitionsDefault,\n    finalStatesDefault,\n    initialStateDefault\n  } = defaults\n\n  const [statesString, setStatesString] = useStorage(\n    'editor__states',\n    statesDefault\n  )\n  const [transitionsString, setTransitionsString] = useStorage(\n    'editor__transitions',\n    transitionsDefault\n  )\n  const [finalStatesString, setFinalStatesString] = useStorage(\n    'editor__finalStates',\n    finalStatesDefault\n  )\n\n  const states = useMemo(() => JSON.parse(statesString), [statesString])\n\n  const setStates = useCallback(\n    nodes => {\n      setStatesString(JSON.stringify(nodes))\n    },\n    [states]\n  )\n\n  const [initialState, setInitialState] = useStorage('editor__initialState', initialStateDefault)\n\n  /** inputs **/\n  const [inputString, setInputString] = useState('')\n  const [multipleInputString, setMultipleInputString] = useStorage('editor__multipleInput', '[]')\n  const multipleInput = useMemo(() => JSON.parse(multipleInputString), [multipleInputString])\n  const setMultipleInput = useCallback((input) => (\n    setMultipleInputString(JSON.stringify(input))\n  ), [setMultipleInputString])\n\n  const {\n    elements,\n    transitions,\n    finalStates\n  } = useMemo(\n    () => {\n      const statesMap: Map<string, any> = new Map(states)\n      states.map((o: any) => statesMap.set(o.data.id, o))\n\n      const transitions = deserializeTransitionMap(transitionsString, statesMap) as Map<string, Transition>\n      const finalStates = new Set(JSON.parse(finalStatesString)) as Set<string>\n\n      for (let [k, v] of transitions) {\n        if (!v.source || !v.target) {\n          transitions.delete(k)\n        }\n      }\n\n      return {\n        transitions,\n        finalStates,\n        elements: [\n          ...states.map((state: any) => ({\n            ...state,\n            classes: [\n              'dfa__state',\n              initialState === state.data.id ? 'dfa__state--initial' : '',\n              finalStates.has(state.data.id) ? 'dfa__state--final' : ''\n            ]\n          })),\n          ...Array.from(transitions.values()).map((trans: any) => ({\n            data: {\n              ...trans,\n              id: trans.id,\n              source: trans.source.data.id,\n              target: trans.target.data.id,\n              label: makeTMTransitionLabel(trans)\n            },\n            classes: 'autorotate'\n          }))\n        ]\n      }\n    },\n    []\n  )\n\n  // XXX: we're currently mutating these things directly, but ideally that is immutable\n  const setTransitions = useCallback(() => {\n    setTransitionsString(serializeTransitionMap(transitions))\n  }, [])\n  const setFinalStates = useCallback(() => {\n    setFinalStatesString(serializeFinalStates(finalStates))\n  }, [])\n\n  const [isSharing, setIsSharing] = useState(false)\n  const onShare = () => {\n    setIsSharing(true)\n    const data = JSON.stringify({\n      'type': 'tm',\n      'initial': initialState,\n      'final': serializeFinalStates(finalStates),\n      states: statesString,\n      transitions: serializeTransitionMap(transitions),\n      multipleInput: multipleInputString\n    })\n\n    setIsSharing(false)\n\n    return fetch('https://api.jsonbin.io/b', {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/json',\n        'secret-key': SECRET_KEY,\n        'collection-id':\tCOLLECTION_ID,\n        'private': false\n      } as any,\n      body: data\n    })\n    .then((res) => {\n      setIsSharing(false)\n      return res.json()\n    })\n  }\n\n  return [\n    elements,\n    initialState,\n    setInitialState,\n    finalStates,\n    setFinalStates,\n    setStates,\n    transitions,\n    setTransitions,\n    inputString,\n    setInputString,\n    multipleInput,\n    setMultipleInput,\n    onShare,\n    isSharing\n  ]\n}\n","import useLocalStorage from 'react-use-localstorage'\nimport useSavedAutomata, { serializeTransitionMap, serializeFinalStates } from './useSavedAutomata'\nimport sample from '../Samples/0n2.fixture'\n\nfunction useSavedAutomataLocalStorage () {\n  return useSavedAutomata(\n    useLocalStorage,\n    {\n      statesDefault: sample.states,\n      transitionsDefault: sample.transitions,\n      finalStatesDefault: sample.final,\n      initialStateDefault: sample.initial\n    }\n  )\n}\n\nexport default useSavedAutomataLocalStorage\n","const q0 = { data: { id: 'q0', label: 'q0' }, position: { x: 50, y: 50 } }\nconst q1 = { data: { id: 'q1', label: 'q1' }, position: { x: 100, y: 150 } }\nconst q2 = { data: { id: 'q2', label: 'q2' }, position: { x: 150, y: 50 } }\nconst q3 = { data: { id: 'q3', label: 'q3' }, position: { x: 200, y: 150 } }\nconst q4 = { data: { id: 'q4', label: 'q4' }, position: { x: 250, y: 50 } }\n\nexport const states = new Map([\n  ['q0', q0],\n  ['q1', q1],\n  ['q2', q2],\n  ['q3', q3],\n  ['q4', q4]\n])\n\nexport const transitions = new Map([\n  [\n    'q0-q1',\n    { id: 'q0-q1', source: q0, target: q1, left: 'a', label: 'a', right: 'R' }\n  ],\n  [\n    'q0-q2',\n    { id: 'q0-q2', source: q0, target: q2, left: 'b', label: 'b', right: 'R' }\n  ],\n  [\n    'q0-q3',\n    { id: 'q0-q3', source: q0, target: q3, left: '', label: '', right: 'R' }\n  ],\n  [\n    'q3-q4',\n    { id: 'q3-q4', source: q3, target: q4, left: 'c', label: 'c', right: 'R' }\n  ],\n  [\n    'q0-q0',\n    { id: 'q0-q0', source: q0, target: q0, left: 's', label: 's', right: 'R' }\n  ]\n])\n\nexport const initialState = 'q0'\nexport const finalStates = new Set(['q4'])\n","import { useState } from 'react'\nimport useSavedAutomata, { serializeTransitionMap, serializeFinalStates } from './useSavedAutomata'\nimport {\n  initialState as initialStateFixture,\n  finalStates as finalStatesFixture,\n  states as statesFixture,\n  transitions as transitionsFixture\n} from '../tm.fixtures'\n\nconst defaultData = {\n  statesDefault: JSON.stringify(Array.from(statesFixture.values())),\n  transitionsDefault: serializeTransitionMap(transitionsFixture),\n  finalStatesDefault: serializeFinalStates(finalStatesFixture),\n  initialStateDefault: initialStateFixture\n}\n\nfunction useSavedAutomataState (initialData: any) {\n  return useSavedAutomata(\n    (k, v) => useState(v),\n    initialData || defaultData\n  )\n}\n\nexport default useSavedAutomataState\n","import { useCallback, useState } from 'react'\n\nfunction useMultipleInputAutomata({\n  finalStates,\n  initialConfig,\n  initialState,\n  multipleInput,\n  lazyResolveConfig,\n  transitions\n}) {\n  const [multipleInputConfigs, setMultipleInputConfigs] = useState([])\n\n  const onRunMultipleInput = useCallback(\n    e => {\n      setMultipleInputConfigs(\n        multipleInput.map(input => {\n          const resolver = lazyResolveConfig(\n            transitions,\n            initialConfig(initialState, input),\n            finalStates\n          )\n          const { value, done } = resolver.next()\n\n          return {\n            resolver,\n            value,\n            done\n          }\n        })\n      )\n    },\n    [multipleInput, setMultipleInputConfigs]\n  )\n  const continueConfig = useCallback(index => {\n    setMultipleInputConfigs(\n      multipleInputConfigs.map((input, i) => {\n        if (index === i) {\n          const { resolver } = input\n          const { value, done } = resolver.next()\n\n          return {\n            resolver,\n            value,\n            done\n          }\n        } else {\n          return input\n        }\n      })\n    )\n  })\n\n  return [multipleInputConfigs, onRunMultipleInput, continueConfig]\n}\n\nexport default useMultipleInputAutomata\n","import React, { useCallback, useRef, useState } from 'react'\nimport flatten from 'lodash.flatten'\nimport { useAlert } from 'react-alert'\nimport Layout from './Layout'\nimport Editor from './Editor'\nimport ZoomedModal from './ZoomedModal'\nimport Instructions from './Instructions'\nimport Samples from './Samples'\nimport Controls from './Controls'\nimport ShareLink from './ShareLink'\nimport { lazyResolveConfig, initialConfig, step } from './helpers/tm'\nimport {\n  useMultipleInputAutomata,\n  useSavedAutomataState,\n  useSavedAutomataLocalStorage,\n  useSaveAsImage\n} from './hooks'\n\nexport default function Automata(props) {\n  const [viewOtherFiles, setViewOtherFiles] = useState(false)\n  const { showModal, setShowModal } = props\n  const shareAlert = useAlert()\n\n  const onViewInstructions = useCallback(\n    () => {\n      setShowModal(true)\n      setViewOtherFiles(false)\n    },\n    [setShowModal, setViewOtherFiles]\n  )\n  const onViewOtherFiles = useCallback(\n    () => {\n      setShowModal(true)\n      setViewOtherFiles(true)\n    },\n    [setViewOtherFiles]\n  )\n\n  const saveHook = props.initialStateData\n    ? useSavedAutomataState(props.initialStateData)\n    : useSavedAutomataLocalStorage()\n\n  const [\n    initialElements,\n    initialState,\n    setInitialState,\n    finalStates,\n    setFinalStates,\n    setStates,\n    transitions,\n    setTransitions,\n    inputString,\n    setInputString,\n    multipleInput,\n    setMultipleInput,\n    onShareRaw,\n    isSharing\n  ] = saveHook\n  const onShare = useCallback(() => {\n    onShareRaw().then(data => {\n      shareAlert.show(\n        <ShareLink url={`//${window.location.hostname}/diagram/${data.id}`} />\n      )\n    })\n  }, onShareRaw)\n\n  const cyRef = useRef(null)\n\n  const [layout, setLayout] = useState(undefined)\n\n  // TODO: un-state-ify this and memoize instead\n  const [configs, setConfigs] = useState([initialConfig(initialState)])\n  const [\n    multipleInputConfigs,\n    onRunMultipleInput,\n    continueConfig\n  ] = useMultipleInputAutomata({\n    finalStates,\n    initialConfig,\n    initialState,\n    multipleInput,\n    lazyResolveConfig,\n    transitions\n  })\n\n  const [rejectedConfigs, setRejectedConfigs] = useState([])\n  const [configBeingHovered, setConfigBeingHovered] = useState(null)\n\n  const onNodesChange = useCallback(nodes => {\n    setStates(\n      nodes\n        .filter(node => node.classes !== 'eh-handle')\n        .map(node => ({\n          data: node.data,\n          position: node.position,\n          classes: node.classes\n        }))\n    )\n  })\n\n  const onLoadFile = props.onLoadFile\n  const setCy = cy => {\n    cyRef.current = cy\n  }\n  const onSetMultipleInput = value => {\n    setMultipleInput(value)\n  }\n  const onConfigHover = (config, hoveringIn) => {\n    if (hoveringIn) {\n      setConfigBeingHovered(config)\n    } else {\n      setConfigBeingHovered(null)\n    }\n  }\n  const onInputStringChange = e => {\n    setInputString(e.target.value)\n  }\n  const onPlay = () => {\n    setConfigs([initialConfig(initialState, inputString)])\n    setRejectedConfigs([])\n  }\n  const onNext = () => {\n    const newConfigs = []\n    const newRejectedConfigs = []\n\n    for (let i = 0; i < configs.length; i++) {\n      const stepConfigs = step(transitions, configs[i])\n      const isConfigRejected = stepConfigs.length === 0\n\n      if (isConfigRejected) {\n        newRejectedConfigs.push(configs[i])\n      } else {\n        newConfigs.push(stepConfigs)\n      }\n    }\n\n    setConfigs(flatten(newConfigs))\n    setRejectedConfigs(newRejectedConfigs)\n  }\n  const saveAsImage = useSaveAsImage(cyRef.current)\n\n  return (\n    <Layout\n      main={\n        <ZoomedModal\n          main={\n            <Editor\n              cy={setCy}\n              layout={layout}\n              onNodesChange={onNodesChange}\n              elements={initialElements}\n              finalStates={finalStates}\n              setFinalStates={setFinalStates}\n              initialState={initialState}\n              setInitialState={setInitialState}\n              transitions={transitions}\n              setTransitions={setTransitions}\n              stepping={configs}\n              configHovered={configBeingHovered}\n            />\n          }\n          modal={\n            viewOtherFiles ? (\n              <Samples\n                onCancel={() => setShowModal(false)}\n                onLoadFile={onLoadFile}\n              />\n            ) : (\n              <Instructions onClose={() => setShowModal(false)} />\n            )\n          }\n          showModal={showModal}\n        />\n      }\n      side={\n        <Controls\n          inputString={inputString}\n          onInputStringChange={onInputStringChange}\n          onPlay={onPlay}\n          onNext={onNext}\n          finalStates={finalStates}\n          rejectedConfigs={rejectedConfigs}\n          configs={configs}\n          continueConfig={continueConfig}\n          onConfigHover={onConfigHover}\n          layout={layout}\n          setLayout={setLayout}\n          saveAsImage={saveAsImage}\n          multipleInput={multipleInput}\n          setMultipleInput={onSetMultipleInput}\n          runMultipleInput={onRunMultipleInput}\n          multipleInputConfigs={multipleInputConfigs}\n          isSharing={isSharing}\n          onShare={onShare}\n          onViewInstructions={onViewInstructions}\n          onViewOtherFiles={onViewOtherFiles}\n        />\n      }\n    />\n  )\n}\n","import { useCallback } from 'react'\n\nexport default function useSaveAsImage(cy) {\n  return useCallback(\n    type => {\n      let image\n\n      if (type === 'image/jpeg') {\n        image = cy.jpeg()\n      } else if (type === 'image/png') {\n        image = cy.png()\n      }\n\n      if (image) {\n        const url = image.replace(\n          /^data:image\\/[^;]+/,\n          'data:application/octet-stream'\n        )\n        window.open(url)\n      }\n    },\n    [cy]\n  )\n}\n","import React, { useEffect, useState } from 'react'\nimport { StyleSheet, View, Text } from 'react-native'\nimport { RouteComponentProps } from 'react-router-dom'\nimport { SECRET_KEY, COLLECTION_ID } from '../hooks/creds'\nimport Automata from '../index'\nimport { PulseLoader } from 'react-spinners'\n\ninterface MatchParams {\n  id: string;\n}\n\ninterface Props extends RouteComponentProps<MatchParams> {\n\n}\n\nfunction APILoadableAutomata (props: Props) {\n  const [loading, setLoading] = useState(true)\n  const [data, setData] = useState<null | any>(null)\n\n  useEffect(\n    () => {\n      fetch(`https://api.jsonbin.io/b/${props.match.params.id}/latest`, {\n        headers: {\n          'Content-Type': 'application/json',\n          'secret-key': SECRET_KEY,\n          'collection-id': COLLECTION_ID,\n          private: false\n        } as any\n      })\n      .then(res => res.json())\n      .then(data => {\n        setData(() => ({\n          statesDefault: data.states,\n          transitionsDefault: data.transitions,\n          finalStatesDefault: data.final,\n          initialStateDefault: data.initial\n        }))\n        setLoading(false)\n      })\n    },\n    [props.match.params.id]\n  )\n\n  return loading ? <Loading /> : (\n    <Automata\n      initialStateData={data}\n      {...props}\n    />\n  )\n}\n\nfunction Loading () {\n  return (\n    <View style={styles.loading}>\n      <Text style={styles.loadingText}>\n        Fetching Diagram Data...\n      </Text>\n      <PulseLoader\n        color='rgba(0, 0, 0, 1)'\n        loading\n        size={8}\n        sizeUnit={'px'}\n      />\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  loading: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '100%'\n  },\n  loadingText: {\n    fontSize: 16,\n    marginBottom: 16\n  }\n})\n\nexport default APILoadableAutomata\n","import React, { useCallback, useState } from 'react'\nimport nanoid from 'nanoid'\nimport useLocalStorage from 'react-use-localstorage'\nimport { Route } from 'react-router'\nimport useReactRouter from 'use-react-router'\nimport Automata from './automata'\nimport APILoadableAutomata from './automata/APILoadableAutomata'\n\n// TODO: Refactor (handle this in one place)\nfunction Resolver() {\n  const [key, setKey] = useState('')\n  const [hasShownTutorial, setHasShownTutorial] = useLocalStorage(\n    'editor__hasShownTutorial',\n    false\n  )\n  const [showModal, setShowModalRaw] = useState(!hasShownTutorial)\n  const { history } = useReactRouter()\n\n  const setShowModal = useCallback(\n    b => {\n      setHasShownTutorial(true)\n      setShowModalRaw(b)\n    },\n    [setShowModalRaw]\n  )\n\n  const onLoadFile = useCallback(\n    data => {\n      history.push('/')\n\n      window.localStorage.setItem('editor__states', data.states)\n      window.localStorage.setItem('editor__transitions', data.transitions)\n      window.localStorage.setItem('editor__finalStates', data['final'])\n      window.localStorage.setItem('editor__initialState', data.initial)\n      window.localStorage.setItem('editor__multipleInput', data.multipleInput)\n\n      setKey(nanoid())\n      setShowModal(false)\n    },\n    [setKey]\n  )\n\n  return (\n    <React.Fragment>\n      <Route\n        exact\n        path=\"/\"\n        render={props => (\n          <Automata\n            {...props}\n            key={key}\n            onLoadFile={onLoadFile}\n            showModal={showModal}\n            setShowModal={setShowModal}\n          />\n        )}\n      />\n      <Route\n        path=\"/diagram/:id\"\n        render={props => (\n          <APILoadableAutomata\n            {...props}\n            onLoadFile={onLoadFile}\n            showModal={showModal}\n            setShowModal={setShowModal}\n          />\n        )}\n      />\n    </React.Fragment>\n  )\n}\n\nexport default Resolver\n","import React from 'react'\nimport { BrowserRouter } from 'react-router-dom'\nimport { transitions, positions, Provider, AlertComponentPropsWithStyle } from 'react-alert'\n\nconst options = {\n  position: positions.BOTTOM_CENTER,\n  timeout: 0,\n  offset: '30px',\n  transition: transitions.FADE\n}\n\nfunction AlertTemplate ({ style, options, message, close }: AlertComponentPropsWithStyle) {\n  return (\n    <div style={style}>\n      <div style={styles.container}>\n        <div style={styles.text}>{message}</div>\n        <div\n          onClick={close}\n          style={styles.closeButton}\n        >\n          <svg fill='white' xmlns='http://www.w3.org/2000/svg' height='25' width='25' viewBox='0 0 48 48'>\n            <path d='M38 12.83l-2.83-2.83-11.17 11.17-11.17-11.17-2.83 2.83 11.17 11.17-11.17 11.17 2.83 2.83 11.17-11.17 11.17 11.17 2.83-2.83-11.17-11.17z' />\n            <path d='M0 0h48v48h-48z' fill='none' />\n          </svg>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n// TODO: Refactor (handle this in one place)\nconst AlertProvider: React.FC<{}> = (props) => {\n  return (\n    <Provider template={AlertTemplate} {...options}>\n      {props.children}\n    </Provider>\n  )\n}\n\nconst styles = {\n  container: {\n    alignItems: 'stretch',\n    backgroundColor: '#333333',\n    boxShadow: '0 8px 12px 0 rgba(0,0,0,0.3)',\n    boxSizing: 'border-box',\n    color: 'white',\n    fontSize: '11px',\n    position: 'relative',\n    width: 300,\n    display: 'flex',\n    justifyContent: 'space-between'\n  },\n  closeButton: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    minWidth: '50px',\n    borderRadius: '0 2px 2px 0',\n    cursor: 'pointer',\n    top: 0,\n    right: 0,\n    backgroundColor: '#444',\n  },\n  button: {\n    position: 'absolute',\n    right: 4,\n    top: 4\n  },\n  text: {\n    display: 'flex',\n    width: '100%',\n    fontSize: 12\n  }\n} as { [s: string]: React.CSSProperties }\n\nexport default AlertProvider\n","import React from 'react'\nimport Resolver from './Resolver'\nimport { BrowserRouter } from 'react-router-dom'\nimport AlertProvider from './core/AlertProvider'\n\n// TODO: Refactor (handle this in one place)\nfunction App() {\n  return (\n    <BrowserRouter>\n      <AlertProvider>\n        <Resolver />\n      </AlertProvider>\n    </BrowserRouter>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\nimport { AppRegistry } from 'react-native'\nimport 'typeface-montserrat'\n\nimport Cytoscape from 'cytoscape'\nimport edgehandles from 'cytoscape-edgehandles'\nimport cxtmenu from 'cytoscape-cxtmenu'\nimport undoRedo from 'cytoscape-undo-redo'\n\nCytoscape.use(edgehandles)\nCytoscape.use(cxtmenu)\nundoRedo(Cytoscape)\n\n// register the app\nAppRegistry.registerComponent('App', () => App)\n\nAppRegistry.runApplication('App', {\n  initialProps: {},\n  rootTag: document.getElementById('root')\n})\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}